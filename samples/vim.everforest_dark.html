<pre class="athl w-full overflow-auto rounded-lg p-8 font-mono text-sm antialiased leading-6" style="color: #d3c6aa; background-color: #2d353b;"><code class="language-vim" translate="no" tabindex="0"><span class="line" data-line="1"><span style="color: #859289;">&quot; ##############</span>
</span><span class="line" data-line="2"><span style="color: #859289;">&quot;  Introduction</span>
</span><span class="line" data-line="3"><span style="color: #859289;">&quot; ##############</span>
</span><span class="line" data-line="4"><span style="color: #859289;">&quot;</span>
</span><span class="line" data-line="5"><span style="color: #859289;">&quot; Vim script (also called VimL) is the subset of Vim&#39;s ex-commands which</span>
</span><span class="line" data-line="6"><span style="color: #859289;">&quot; supplies a number of features one would expect from a scripting language,</span>
</span><span class="line" data-line="7"><span style="color: #859289;">&quot; such as values, variables, functions or loops. Always keep in the back of</span>
</span><span class="line" data-line="8"><span style="color: #859289;">&quot; your mind that a Vim script file is just a sequence of ex-commands. It is</span>
</span><span class="line" data-line="9"><span style="color: #859289;">&quot; very common for a script to mix programming-language features and raw</span>
</span><span class="line" data-line="10"><span style="color: #859289;">&quot; ex-commands.</span>
</span><span class="line" data-line="11"><span style="color: #859289;">&quot;</span>
</span><span class="line" data-line="12"><span style="color: #859289;">&quot; You can run Vim script directly by entering the commands in command-line mode</span>
</span><span class="line" data-line="13"><span style="color: #859289;">&quot; (press `:` to enter command-line mode), or you can write them to a file</span>
</span><span class="line" data-line="14"><span style="color: #859289;">&quot; (without the leading `:`) and source it in a running Vim instance (`:source</span>
</span><span class="line" data-line="15"><span style="color: #859289;">&quot; path/to/file`). Some files are sourced automatically as part of your</span>
</span><span class="line" data-line="16"><span style="color: #859289;">&quot; configuration (see |startup|). This guide assumes that you are familiar</span>
</span><span class="line" data-line="17"><span style="color: #859289;">&quot; with ex-commands and will only cover the scripting. Help topics to the</span>
</span><span class="line" data-line="18"><span style="color: #859289;">&quot; relevant manual sections are included.</span>
</span><span class="line" data-line="19"><span style="color: #859289;">&quot;</span>
</span><span class="line" data-line="20"><span style="color: #859289;">&quot; See |usr_41.txt| for the official introduction to Vim script. A comment is</span>
</span><span class="line" data-line="21"><span style="color: #859289;">&quot; anything following an unmatched `&quot;` until the end of the line, and `|`</span>
</span><span class="line" data-line="22"><span style="color: #859289;">&quot; separates instructions (what `;` does in most other languages). References to</span>
</span><span class="line" data-line="23"><span style="color: #859289;">&quot; the manual as surrounded with `|`, such as |help.txt|.</span>
</span><span class="line" data-line="24">
</span><span class="line" data-line="25"><span style="color: #859289;">&quot; This is a comment</span>
</span><span class="line" data-line="26">
</span><span class="line" data-line="27"><span style="color: #859289;">&quot; The vertical line &#39;|&#39; (pipe) separates commands</span>
</span><span class="line" data-line="28"><span style="color: #e67e80;">echo</span> <span style="color: #83c092;">&#39;Hello&#39;</span> | <span style="color: #e67e80;">echo</span> <span style="color: #83c092;">&#39;world!&#39;</span>
</span><span class="line" data-line="29">
</span><span class="line" data-line="30"><span style="color: #859289;">&quot; Putting a comment after a command usually works</span>
</span><span class="line" data-line="31"><span style="color: #e67e80;">pwd</span>                   <span style="color: #859289;">&quot; Displays the current working directory</span>
</span><span class="line" data-line="32"><span style="color: #859289;"></span>
</span><span class="line" data-line="33"><span style="color: #859289;">&quot; Except for some commands it does not; use the command delimiter before the</span>
</span><span class="line" data-line="34"><span style="color: #859289;">&quot; comment (echo assumes that the quotation mark begins a string)</span>
</span><span class="line" data-line="35"><span style="color: #e67e80;">echo</span> <span style="color: #83c092;">&#39;Hello world!&#39;</span>  | &quot; <span style="color: #e69875;">Displays a message</span>
</span><span class="line" data-line="36">
</span><span class="line" data-line="37"><span style="color: #859289;">&quot; Line breaks can be escaped by placing a backslash as the first non-whitespace</span>
</span><span class="line" data-line="38"><span style="color: #859289;">&quot; character on the *following* line. Only works in script files, not on the</span>
</span><span class="line" data-line="39"><span style="color: #859289;">&quot; command line</span>
</span><span class="line" data-line="40"><span style="color: #e67e80;">echo</span> &quot; Hello
</span><span class="line" data-line="41">    <span style="color: #83c092;">\ world &quot;</span>
</span><span class="line" data-line="42">
</span><span class="line" data-line="43"><span style="color: #e67e80;">echo</span> <span style="color: #d3c6aa;">[</span><span style="color: #d699b6;">1</span><span style="color: #859289;">,</span>
</span><span class="line" data-line="44">    \ <span style="color: #d699b6;">2</span><span style="color: #d3c6aa;">]</span>
</span><span class="line" data-line="45">
</span><span class="line" data-line="46"><span style="color: #e67e80;">echo</span> <span style="color: #d3c6aa;">&lbrace;</span>
</span><span class="line" data-line="47">    \ <span style="color: #83c092;">&#39;a&#39;</span><span style="color: #859289;">:</span> <span style="color: #d699b6;">1</span><span style="color: #859289;">,</span>
</span><span class="line" data-line="48">    \ <span style="color: #83c092;">&#39;b&#39;</span><span style="color: #859289;">:</span> <span style="color: #d699b6;">2</span>
</span><span class="line" data-line="49">\<span style="color: #d3c6aa;">&rbrace;</span>
</span><span class="line" data-line="50">
</span><span class="line" data-line="51">
</span><span class="line" data-line="52"><span style="color: #859289;">&quot; #######</span>
</span><span class="line" data-line="53"><span style="color: #859289;">&quot;  Types</span>
</span><span class="line" data-line="54"><span style="color: #859289;">&quot; #######</span>
</span><span class="line" data-line="55"><span style="color: #859289;">&quot;</span>
</span><span class="line" data-line="56"><span style="color: #859289;">&quot; For an overview of types see |E712|. For an overview of operators see</span>
</span><span class="line" data-line="57"><span style="color: #859289;">&quot; |expression-syntax|</span>
</span><span class="line" data-line="58">
</span><span class="line" data-line="59"><span style="color: #859289;">&quot; Numbers (|expr-number|)</span>
</span><span class="line" data-line="60"><span style="color: #859289;">&quot; #######</span>
</span><span class="line" data-line="61">
</span><span class="line" data-line="62"><span style="color: #e67e80;">echo</span>  <span style="color: #d699b6;">123</span>         | &quot; <span style="color: #e69875;">Decimal</span>
</span><span class="line" data-line="63"><span style="color: #e67e80;">echo</span>  <span style="color: #d699b6;">0b1111011</span>   | &quot; <span style="color: #e69875;">Binary</span>
</span><span class="line" data-line="64"><span style="color: #e67e80;">echo</span>  <span style="color: #d699b6;">0173</span>        | &quot; <span style="color: #e69875;">Octal</span>
</span><span class="line" data-line="65"><span style="color: #e67e80;">echo</span>  <span style="color: #d699b6;">0x7B</span>        | &quot; <span style="color: #e69875;">Hexadecimal</span>
</span><span class="line" data-line="66"><span style="color: #e67e80;">echo</span>  <span style="color: #d699b6;">123.0</span>       | &quot; <span style="color: #e69875;">Floating-point</span>
</span><span class="line" data-line="67"><span style="color: #e67e80;">echo</span>  <span style="color: #d699b6;">1.23e2</span>      | &quot; Floating-<span style="color: #e69875;">point (scientific notation)</span>
</span><span class="line" data-line="68">
</span><span class="line" data-line="69"><span style="color: #859289;">&quot; Note that an *integer* number with a leading `0` is in octal notation. The</span>
</span><span class="line" data-line="70"><span style="color: #859289;">&quot; usual arithmetic operations are supported.</span>
</span><span class="line" data-line="71">
</span><span class="line" data-line="72"><span style="color: #e67e80;">echo</span>  <span style="color: #d699b6;">1</span> <span style="color: #e69875;">+</span> <span style="color: #d699b6;">2</span>       | &quot; <span style="color: #e69875;">Addition</span>
</span><span class="line" data-line="73"><span style="color: #e67e80;">echo</span>  <span style="color: #d699b6;">1</span> <span style="color: #e69875;">-</span> <span style="color: #d699b6;">2</span>       | &quot; <span style="color: #e69875;">Subtraction</span>
</span><span class="line" data-line="74"><span style="color: #e67e80;">echo</span>  <span style="color: #e69875;">-</span> <span style="color: #d699b6;">1</span>         | &quot; <span style="color: #e69875;">Negation (unary minus)</span>
</span><span class="line" data-line="75"><span style="color: #e67e80;">echo</span>  <span style="color: #e69875;">+</span> <span style="color: #d699b6;">1</span>         | &quot; Unary plus (does nothing <span style="color: #e69875;">really, but still legal)</span>
</span><span class="line" data-line="76"><span style="color: #e67e80;">echo</span>  <span style="color: #d699b6;">1</span> <span style="color: #e69875;">*</span> <span style="color: #d699b6;">2</span>       | &quot; <span style="color: #e69875;">Multiplication</span>
</span><span class="line" data-line="77"><span style="color: #e67e80;">echo</span>  <span style="color: #d699b6;">1</span> <span style="color: #e69875;">/</span> <span style="color: #d699b6;">2</span>       | &quot; <span style="color: #e69875;">Division</span>
</span><span class="line" data-line="78"><span style="color: #e67e80;">echo</span>  <span style="color: #d699b6;">1</span> <span style="color: #e69875;">%</span> <span style="color: #d699b6;">2</span>       | &quot; <span style="color: #e69875;">Modulo (remainder)</span>
</span><span class="line" data-line="79">
</span><span class="line" data-line="80"><span style="color: #859289;">&quot; Booleans (|Boolean|)</span>
</span><span class="line" data-line="81"><span style="color: #859289;">&quot; ########</span>
</span><span class="line" data-line="82"><span style="color: #859289;">&quot;</span>
</span><span class="line" data-line="83"><span style="color: #859289;">&quot; The number 0 is false, every other number is true. Strings are implicitly</span>
</span><span class="line" data-line="84"><span style="color: #859289;">&quot; converted to numbers (see below). There are two pre-defined semantic</span>
</span><span class="line" data-line="85"><span style="color: #859289;">&quot; constants.</span>
</span><span class="line" data-line="86">
</span><span class="line" data-line="87"><span style="color: #e67e80;">echo</span>  v:<span style="color: #d699b6;">true</span>      | &quot; Evaluates to <span style="color: #e69875;">1 or the string &#39;v:true&#39;</span>
</span><span class="line" data-line="88"><span style="color: #e67e80;">echo</span>  v:<span style="color: #d699b6;">false</span>     | &quot; Evaluates to <span style="color: #e69875;">0 or the string &#39;v:false&#39;</span>
</span><span class="line" data-line="89">
</span><span class="line" data-line="90"><span style="color: #859289;">&quot; Boolean values can result from comparison of two objects.</span>
</span><span class="line" data-line="91">
</span><span class="line" data-line="92"><span style="color: #e67e80;">echo</span>  <span style="color: #d3c6aa;">x</span> <span style="color: #e69875;">==</span> <span style="color: #d3c6aa;">y</span>             | &quot; <span style="color: #e69875;">Equality by value</span>
</span><span class="line" data-line="93"><span style="color: #e67e80;">echo</span>  <span style="color: #d3c6aa;">x</span> <span style="color: #e69875;">!=</span> <span style="color: #d3c6aa;">y</span>             | &quot; <span style="color: #e69875;">Inequality</span>
</span><span class="line" data-line="94"><span style="color: #e67e80;">echo</span>  <span style="color: #d3c6aa;">x</span> <span style="color: #e69875;">&gt;</span>  <span style="color: #d3c6aa;">y</span>             | &quot; <span style="color: #e69875;">Greater than</span>
</span><span class="line" data-line="95"><span style="color: #e67e80;">echo</span>  <span style="color: #d3c6aa;">x</span> <span style="color: #e69875;">&gt;=</span> <span style="color: #d3c6aa;">y</span>             | &quot; <span style="color: #e69875;">Greater than or equal</span>
</span><span class="line" data-line="96"><span style="color: #e67e80;">echo</span>  <span style="color: #d3c6aa;">x</span> <span style="color: #e69875;">&lt;</span>  <span style="color: #d3c6aa;">y</span>             | &quot; <span style="color: #e69875;">Smaller than</span>
</span><span class="line" data-line="97"><span style="color: #e67e80;">echo</span>  <span style="color: #d3c6aa;">x</span> <span style="color: #e69875;">&lt;=</span> <span style="color: #d3c6aa;">y</span>             | &quot; <span style="color: #e69875;">Smaller than or equal</span>
</span><span class="line" data-line="98"><span style="color: #e67e80;">echo</span>  <span style="color: #d3c6aa;">x</span> <span style="color: #e69875;">is</span> <span style="color: #d3c6aa;">y</span>             | &quot; Instance identity (lists <span style="color: #e69875;">and dictionaries)</span>
</span><span class="line" data-line="99"><span style="color: #e67e80;">echo</span>  <span style="color: #d3c6aa;">x</span> <span style="color: #e69875;">isnot</span> <span style="color: #d3c6aa;">y</span>          | &quot; Instance non-identity (lists <span style="color: #e69875;">and dictionaries)</span>
</span><span class="line" data-line="100">
</span><span class="line" data-line="101"><span style="color: #859289;">&quot; Strings are compared based on their alphanumerical ordering</span>
</span><span class="line" data-line="102"><span style="color: #859289;">&quot; echo &#39;a&#39; &lt; &#39;b&#39;. Case sensitivity depends on the setting of &#39;ignorecase&#39;</span>
</span><span class="line" data-line="103"><span style="color: #859289;">&quot;</span>
</span><span class="line" data-line="104"><span style="color: #859289;">&quot; Explicit case-sensitivity is specified by appending &#39;#&#39; (match case) or &#39;?&#39;</span>
</span><span class="line" data-line="105"><span style="color: #859289;">&quot; (ignore case) to the operator. Prefer explicitly case sensitivity when writing</span>
</span><span class="line" data-line="106"><span style="color: #859289;">&quot; portable scripts.</span>
</span><span class="line" data-line="107">
</span><span class="line" data-line="108"><span style="color: #e67e80;">echo</span>  <span style="color: #83c092;">&#39;a&#39;</span> <span style="color: #e69875;">&lt;</span>  <span style="color: #83c092;">&#39;B&#39;</span>         | &quot; True or <span style="color: #e69875;">false depending on &#39;ignorecase&#39;</span>
</span><span class="line" data-line="109"><span style="color: #e67e80;">echo</span>  <span style="color: #83c092;">&#39;a&#39;</span> <span style="color: #e69875;">&lt;</span><span style="color: #e69875;">?</span> <span style="color: #83c092;">&#39;B&#39;</span>         | &quot; <span style="color: #e69875;">True</span>
</span><span class="line" data-line="110"><span style="color: #e67e80;">echo</span>  <span style="color: #83c092;">&#39;a&#39;</span> <span style="color: #e69875;">&lt;</span><span style="color: #e69875;">#</span> <span style="color: #83c092;">&#39;B&#39;</span>         | &quot; <span style="color: #e69875;">False</span>
</span><span class="line" data-line="111">
</span><span class="line" data-line="112"><span style="color: #859289;">&quot; Regular expression matching</span>
</span><span class="line" data-line="113"><span style="color: #e67e80;">echo</span>  <span style="color: #83c092;">&quot;hi&quot;</span> <span style="color: #e69875;">=~</span>  <span style="color: #83c092;">&quot;hello&quot;</span>    | &quot; Regular expression <span style="color: #e69875;">match, uses &#39;ignorecase&#39;</span>
</span><span class="line" data-line="114"><span style="color: #e67e80;">echo</span>  <span style="color: #83c092;">&quot;hi&quot;</span> <span style="color: #e69875;">=~</span><span style="color: #e69875;">#</span> <span style="color: #83c092;">&quot;hello&quot;</span>    | &quot; Regular expression <span style="color: #e69875;">match, case sensitive</span>
</span><span class="line" data-line="115"><span style="color: #e67e80;">echo</span>  <span style="color: #83c092;">&quot;hi&quot;</span> <span style="color: #e69875;">=~</span><span style="color: #e69875;">?</span> <span style="color: #83c092;">&quot;hello&quot;</span>    | &quot; Regular expression <span style="color: #e69875;">match, case insensitive</span>
</span><span class="line" data-line="116"><span style="color: #e67e80;">echo</span>  <span style="color: #83c092;">&quot;hi&quot;</span> <span style="color: #e69875;">!~</span>  <span style="color: #83c092;">&quot;hello&quot;</span>    | &quot; Regular expression <span style="color: #e69875;">unmatch, use &#39;ignorecase&#39;</span>
</span><span class="line" data-line="117"><span style="color: #e67e80;">echo</span>  <span style="color: #83c092;">&quot;hi&quot;</span> <span style="color: #e69875;">!~</span><span style="color: #e69875;">#</span> <span style="color: #83c092;">&quot;hello&quot;</span>    | &quot; Regular expression <span style="color: #e69875;">unmatch, case sensitive</span>
</span><span class="line" data-line="118"><span style="color: #e67e80;">echo</span>  <span style="color: #83c092;">&quot;hi&quot;</span> <span style="color: #e69875;">!~</span><span style="color: #e69875;">?</span> <span style="color: #83c092;">&quot;hello&quot;</span>    | &quot; Regular expression <span style="color: #e69875;">unmatch, case insensitive</span>
</span><span class="line" data-line="119">
</span><span class="line" data-line="120"><span style="color: #859289;">&quot; Boolean operations are possible.</span>
</span><span class="line" data-line="121">
</span><span class="line" data-line="122"><span style="color: #e67e80;">echo</span>  v:<span style="color: #d699b6;">true</span> <span style="color: #e69875;">&amp;&amp;</span> v:<span style="color: #d699b6;">false</span>       | &quot; <span style="color: #e69875;">Logical AND</span>
</span><span class="line" data-line="123"><span style="color: #e67e80;">echo</span>  v:<span style="color: #d699b6;">true</span> <span style="color: #e69875;">||</span> v:<span style="color: #d699b6;">false</span>       | &quot; <span style="color: #e69875;">Logical OR</span>
</span><span class="line" data-line="124"><span style="color: #e67e80;">echo</span>  <span style="color: #e69875;">!</span> v:<span style="color: #d699b6;">true</span>                | &quot; <span style="color: #e69875;">Logical NOT</span>
</span><span class="line" data-line="125"><span style="color: #e67e80;">echo</span>  v:<span style="color: #d699b6;">true</span> <span style="color: #e67e80;">?</span> <span style="color: #83c092;">&#39;yes&#39;</span> <span style="color: #e67e80;">:</span> <span style="color: #83c092;">&#39;no&#39;</span>   | &quot; <span style="color: #e69875;">Ternary operator</span>
</span><span class="line" data-line="126">
</span><span class="line" data-line="127">
</span><span class="line" data-line="128"><span style="color: #859289;">&quot; Strings (|String|)</span>
</span><span class="line" data-line="129"><span style="color: #859289;">&quot; #######</span>
</span><span class="line" data-line="130"><span style="color: #859289;">&quot;</span>
</span><span class="line" data-line="131"><span style="color: #859289;">&quot; An ordered zero-indexed sequence of bytes. The encoding of text into bytes</span>
</span><span class="line" data-line="132"><span style="color: #859289;">&quot; depends on the option |&#39;encoding&#39;|.</span>
</span><span class="line" data-line="133">
</span><span class="line" data-line="134"><span style="color: #859289;">&quot; Literal constructors</span>
</span><span class="line" data-line="135"><span style="color: #e67e80;">echo</span>  <span style="color: #83c092;">&quot;Hello world\n&quot;</span>   | &quot; The last two <span style="color: #e69875;">characters stand for newline</span>
</span><span class="line" data-line="136"><span style="color: #e67e80;">echo</span>  <span style="color: #83c092;">&#39;Hello world\n&#39;</span>   | &quot; The last two <span style="color: #e69875;">characters are literal</span>
</span><span class="line" data-line="137"><span style="color: #e67e80;">echo</span>  <span style="color: #83c092;">&#39;Let&#39;&#39;s go!&#39;</span>      | &quot; Two single quotes become <span style="color: #e69875;">one quote character</span>
</span><span class="line" data-line="138">
</span><span class="line" data-line="139"><span style="color: #859289;">&quot; Single-quote strings take all characters are literal, except two single</span>
</span><span class="line" data-line="140"><span style="color: #859289;">&quot; quotes, which are taken to be a single quote in the string itself. See</span>
</span><span class="line" data-line="141"><span style="color: #859289;">&quot; |expr-quote| for all possible escape sequences.</span>
</span><span class="line" data-line="142">
</span><span class="line" data-line="143"><span style="color: #859289;">&quot; String concatenation</span>
</span><span class="line" data-line="144"><span style="color: #859289;">&quot; The .. operator is preferred, but only supported in since Vim 8.1.1114</span>
</span><span class="line" data-line="145"><span style="color: #e67e80;">echo</span>  <span style="color: #83c092;">&#39;Hello &#39;</span> <span style="color: #e69875;">.</span>  <span style="color: #83c092;">&#39;world&#39;</span>  | &quot; <span style="color: #e69875;">String concatenation</span>
</span><span class="line" data-line="146"><span style="color: #e67e80;">echo</span>  <span style="color: #83c092;">&#39;Hello &#39;</span> <span style="color: #e69875;">..</span> <span style="color: #83c092;">&#39;world&#39;</span>  | &quot; String <span style="color: #e69875;">concatenation (new variant)</span>
</span><span class="line" data-line="147">
</span><span class="line" data-line="148"><span style="color: #859289;">&quot; String indexing</span>
</span><span class="line" data-line="149"><span style="color: #e67e80;">echo</span>  <span style="color: #83c092;">&#39;Hello&#39;</span><span style="color: #d3c6aa;">[</span><span style="color: #d699b6;">0</span><span style="color: #d3c6aa;">]</span>           | &quot; <span style="color: #e69875;">First byte</span>
</span><span class="line" data-line="150"><span style="color: #e67e80;">echo</span>  <span style="color: #83c092;">&#39;Hello&#39;</span><span style="color: #d3c6aa;">[</span><span style="color: #d699b6;">1</span><span style="color: #d3c6aa;">]</span>           | &quot; <span style="color: #e69875;">Second byte</span>
</span><span class="line" data-line="151"><span style="color: #e67e80;">echo</span>  <span style="color: #83c092;">&#39;Hellö&#39;</span><span style="color: #d3c6aa;">[</span><span style="color: #d699b6;">4</span><span style="color: #d3c6aa;">]</span>           | &quot; Returns <span style="color: #e69875;">a byte, not the character &#39;ö&#39;</span>
</span><span class="line" data-line="152">
</span><span class="line" data-line="153"><span style="color: #859289;">&quot; Substrings (second index is inclusive)</span>
</span><span class="line" data-line="154"><span style="color: #e67e80;">echo</span>  <span style="color: #83c092;">&#39;Hello&#39;</span><span style="color: #d3c6aa;">[</span><span style="color: #859289;">:</span><span style="color: #d3c6aa;">]</span>           | &quot; <span style="color: #e69875;">Copy of entire string</span>
</span><span class="line" data-line="155"><span style="color: #e67e80;">echo</span>  <span style="color: #83c092;">&#39;Hello&#39;</span><span style="color: #d3c6aa;">[</span><span style="color: #d699b6;">1</span><span style="color: #859289;">:</span><span style="color: #d699b6;">3</span><span style="color: #d3c6aa;">]</span>         | &quot; Substring, second to <span style="color: #e69875;">fourth byte</span>
</span><span class="line" data-line="156"><span style="color: #e67e80;">echo</span>  <span style="color: #83c092;">&#39;Hello&#39;</span><span style="color: #d3c6aa;">[</span><span style="color: #d699b6;">1</span><span style="color: #859289;">:</span><span style="color: #d699b6;">-2</span><span style="color: #d3c6aa;">]</span>        | &quot; Substring <span style="color: #e69875;">until second to last byte</span>
</span><span class="line" data-line="157"><span style="color: #e67e80;">echo</span>  <span style="color: #83c092;">&#39;Hello&#39;</span><span style="color: #d3c6aa;">[</span><span style="color: #d699b6;">1</span><span style="color: #859289;">:</span><span style="color: #d3c6aa;">]</span>          | &quot; <span style="color: #e69875;">Substring with starting index</span>
</span><span class="line" data-line="158"><span style="color: #e67e80;">echo</span>  <span style="color: #83c092;">&#39;Hello&#39;</span><span style="color: #d3c6aa;">[</span><span style="color: #859289;">:</span><span style="color: #d699b6;">2</span><span style="color: #d3c6aa;">]</span>          | &quot; <span style="color: #e69875;">Substring with ending index</span>
</span><span class="line" data-line="159"><span style="color: #e67e80;">echo</span>  <span style="color: #83c092;">&#39;Hello&#39;</span><span style="color: #d3c6aa;">[</span><span style="color: #d699b6;">-2</span><span style="color: #859289;">:</span><span style="color: #d3c6aa;">]</span>         | &quot; Substring <span style="color: #e69875;">relative to end of string</span>
</span><span class="line" data-line="160">
</span><span class="line" data-line="161"><span style="color: #859289;">&quot; A negative index is relative to the end of the string. See</span>
</span><span class="line" data-line="162"><span style="color: #859289;">&quot; |string-functions| for all string-related functions.</span>
</span><span class="line" data-line="163">
</span><span class="line" data-line="164"><span style="color: #859289;">&quot; Lists (|List|)</span>
</span><span class="line" data-line="165"><span style="color: #859289;">&quot; #####</span>
</span><span class="line" data-line="166"><span style="color: #859289;">&quot;</span>
</span><span class="line" data-line="167"><span style="color: #859289;">&quot; An ordered zero-indexed heterogeneous sequence of arbitrary Vim script</span>
</span><span class="line" data-line="168"><span style="color: #859289;">&quot; objects.</span>
</span><span class="line" data-line="169">
</span><span class="line" data-line="170"><span style="color: #859289;">&quot; Literal constructor</span>
</span><span class="line" data-line="171"><span style="color: #e67e80;">echo</span>  <span style="color: #d3c6aa;">[</span><span style="color: #d3c6aa;">]</span>                   | &quot; <span style="color: #e69875;">Empty list</span>
</span><span class="line" data-line="172"><span style="color: #e67e80;">echo</span>  <span style="color: #d3c6aa;">[</span><span style="color: #d699b6;">1</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">2</span><span style="color: #859289;">,</span> <span style="color: #83c092;">&#39;Hello&#39;</span><span style="color: #d3c6aa;">]</span>      | &quot; <span style="color: #e69875;">List with elements</span>
</span><span class="line" data-line="173"><span style="color: #e67e80;">echo</span>  <span style="color: #d3c6aa;">[</span><span style="color: #d699b6;">1</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">2</span><span style="color: #859289;">,</span> <span style="color: #83c092;">&#39;Hello&#39;</span><span style="color: #859289;">,</span> <span style="color: #d3c6aa;">]</span>    | &quot; <span style="color: #e69875;">Trailing comma permitted</span>
</span><span class="line" data-line="174"><span style="color: #e67e80;">echo</span>  <span style="color: #d3c6aa;">[</span><span style="color: #d3c6aa;">[</span><span style="color: #d699b6;">1</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">2</span><span style="color: #d3c6aa;">]</span><span style="color: #859289;">,</span> <span style="color: #83c092;">&#39;Hello&#39;</span><span style="color: #d3c6aa;">]</span>    | &quot; <span style="color: #e69875;">Lists can be nested arbitrarily</span>
</span><span class="line" data-line="175">
</span><span class="line" data-line="176"><span style="color: #859289;">&quot; List concatenation</span>
</span><span class="line" data-line="177"><span style="color: #e67e80;">echo</span>  <span style="color: #d3c6aa;">[</span><span style="color: #d699b6;">1</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">2</span><span style="color: #d3c6aa;">]</span> <span style="color: #e69875;">+</span> <span style="color: #d3c6aa;">[</span><span style="color: #d699b6;">3</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">4</span><span style="color: #d3c6aa;">]</span>      | &quot; <span style="color: #e69875;">Creates a new list</span>
</span><span class="line" data-line="178">
</span><span class="line" data-line="179"><span style="color: #859289;">&quot; List indexing, negative is relative to end of list (|list-index|)</span>
</span><span class="line" data-line="180"><span style="color: #e67e80;">echo</span>  <span style="color: #d3c6aa;">[</span><span style="color: #d699b6;">1</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">2</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">3</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">4</span><span style="color: #d3c6aa;">]</span><span style="color: #d3c6aa;">[</span><span style="color: #d699b6;">2</span><span style="color: #d3c6aa;">]</span>      | &quot; <span style="color: #e69875;">Third element</span>
</span><span class="line" data-line="181"><span style="color: #e67e80;">echo</span>  <span style="color: #d3c6aa;">[</span><span style="color: #d699b6;">1</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">2</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">3</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">4</span><span style="color: #d3c6aa;">]</span><span style="color: #d3c6aa;">[</span><span style="color: #d699b6;">-1</span><span style="color: #d3c6aa;">]</span>     | &quot; <span style="color: #e69875;">Last element</span>
</span><span class="line" data-line="182">
</span><span class="line" data-line="183"><span style="color: #859289;">&quot; List slicing (|sublist|)</span>
</span><span class="line" data-line="184"><span style="color: #e67e80;">echo</span>  <span style="color: #d3c6aa;">[</span><span style="color: #d699b6;">1</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">2</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">3</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">4</span><span style="color: #d3c6aa;">]</span><span style="color: #d3c6aa;">[</span><span style="color: #859289;">:</span><span style="color: #d3c6aa;">]</span>      | &quot; <span style="color: #e69875;">Shallow copy of entire list</span>
</span><span class="line" data-line="185"><span style="color: #e67e80;">echo</span>  <span style="color: #d3c6aa;">[</span><span style="color: #d699b6;">1</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">2</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">3</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">4</span><span style="color: #d3c6aa;">]</span><span style="color: #d3c6aa;">[</span><span style="color: #859289;">:</span><span style="color: #d699b6;">2</span><span style="color: #d3c6aa;">]</span>     | &quot; Sublist <span style="color: #e69875;">until third item (inclusive)</span>
</span><span class="line" data-line="186"><span style="color: #e67e80;">echo</span>  <span style="color: #d3c6aa;">[</span><span style="color: #d699b6;">1</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">2</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">3</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">4</span><span style="color: #d3c6aa;">]</span><span style="color: #d3c6aa;">[</span><span style="color: #d699b6;">2</span><span style="color: #859289;">:</span><span style="color: #d3c6aa;">]</span>     | &quot; Sublist <span style="color: #e69875;">from third item (inclusive)</span>
</span><span class="line" data-line="187"><span style="color: #e67e80;">echo</span>  <span style="color: #d3c6aa;">[</span><span style="color: #d699b6;">1</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">2</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">3</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">4</span><span style="color: #d3c6aa;">]</span><span style="color: #d3c6aa;">[</span><span style="color: #859289;">:</span><span style="color: #d699b6;">-2</span><span style="color: #d3c6aa;">]</span>    | &quot; Sublist until second-to-last item (inclusive)
</span><span class="line" data-line="188">
</span><span class="line" data-line="189"><span style="color: #859289;">&quot; All slicing operations create new lists. To modify a list in-place use list</span>
</span><span class="line" data-line="190"><span style="color: #859289;">&quot; functions (|list-functions|) or assign directly to an item (see below about</span>
</span><span class="line" data-line="191"><span style="color: #859289;">&quot; variables).</span>
</span><span class="line" data-line="192">
</span><span class="line" data-line="193">
</span><span class="line" data-line="194"><span style="color: #859289;">&quot; Dictionaries (|Dictionary|)</span>
</span><span class="line" data-line="195"><span style="color: #859289;">&quot; ############</span>
</span><span class="line" data-line="196"><span style="color: #859289;">&quot;</span>
</span><span class="line" data-line="197"><span style="color: #859289;">&quot; An unordered sequence of key-value pairs, keys are always strings (numbers</span>
</span><span class="line" data-line="198"><span style="color: #859289;">&quot; are implicitly converted to strings).</span>
</span><span class="line" data-line="199">
</span><span class="line" data-line="200"><span style="color: #859289;">&quot; Dictionary literal</span>
</span><span class="line" data-line="201"><span style="color: #e67e80;">echo</span>  <span style="color: #d3c6aa;">&lbrace;</span><span style="color: #d3c6aa;">&rbrace;</span>                       | &quot; <span style="color: #e69875;">Empty dictionary</span>
</span><span class="line" data-line="202"><span style="color: #e67e80;">echo</span>  <span style="color: #d3c6aa;">&lbrace;</span><span style="color: #83c092;">&#39;a&#39;</span><span style="color: #859289;">:</span> <span style="color: #d699b6;">1</span><span style="color: #859289;">,</span> <span style="color: #83c092;">&#39;b&#39;</span><span style="color: #859289;">:</span> <span style="color: #d699b6;">2</span><span style="color: #d3c6aa;">&rbrace;</span>         | &quot; <span style="color: #e69875;">Dictionary literal</span>
</span><span class="line" data-line="203"><span style="color: #e67e80;">echo</span>  <span style="color: #d3c6aa;">&lbrace;</span><span style="color: #83c092;">&#39;a&#39;</span><span style="color: #859289;">:</span> <span style="color: #d699b6;">1</span><span style="color: #859289;">,</span> <span style="color: #83c092;">&#39;b&#39;</span><span style="color: #859289;">:</span> <span style="color: #d699b6;">2</span><span style="color: #859289;">,</span> <span style="color: #d3c6aa;">&rbrace;</span>       | &quot; <span style="color: #e69875;">Trailing comma permitted</span>
</span><span class="line" data-line="204"><span style="color: #e67e80;">echo</span>  <span style="color: #d3c6aa;">&lbrace;</span><span style="color: #83c092;">&#39;x&#39;</span><span style="color: #859289;">:</span> <span style="color: #d3c6aa;">&lbrace;</span><span style="color: #83c092;">&#39;a&#39;</span><span style="color: #859289;">:</span> <span style="color: #d699b6;">1</span><span style="color: #859289;">,</span> <span style="color: #83c092;">&#39;b&#39;</span><span style="color: #859289;">:</span> <span style="color: #d699b6;">2</span><span style="color: #d3c6aa;">&rbrace;</span><span style="color: #d3c6aa;">&rbrace;</span>  | &quot; <span style="color: #e69875;">Nested dictionary</span>
</span><span class="line" data-line="205">
</span><span class="line" data-line="206"><span style="color: #859289;">&quot; Indexing a dictionary</span>
</span><span class="line" data-line="207"><span style="color: #e67e80;">echo</span>  <span style="color: #d3c6aa;">&lbrace;</span><span style="color: #83c092;">&#39;a&#39;</span><span style="color: #859289;">:</span> <span style="color: #d699b6;">1</span><span style="color: #859289;">,</span> <span style="color: #83c092;">&#39;b&#39;</span><span style="color: #859289;">:</span> <span style="color: #d699b6;">2</span><span style="color: #d3c6aa;">&rbrace;</span><span style="color: #d3c6aa;">[</span><span style="color: #83c092;">&#39;a&#39;</span><span style="color: #d3c6aa;">]</span>    | &quot; <span style="color: #e69875;">Literal index</span>
</span><span class="line" data-line="208"><span style="color: #e67e80;">echo</span>  <span style="color: #d3c6aa;">&lbrace;</span><span style="color: #83c092;">&#39;a&#39;</span><span style="color: #859289;">:</span> <span style="color: #d699b6;">1</span><span style="color: #859289;">,</span> <span style="color: #83c092;">&#39;b&#39;</span><span style="color: #859289;">:</span> <span style="color: #d699b6;">2</span><span style="color: #d3c6aa;">&rbrace;</span><span style="color: #859289;">.</span><span style="color: #d3c6aa;">a</span>       | &quot; <span style="color: #e69875;">Syntactic sugar for simple keys</span>
</span><span class="line" data-line="209">
</span><span class="line" data-line="210"><span style="color: #859289;">&quot; See |dict-functions| for dictionary manipulation functions.</span>
</span><span class="line" data-line="211">
</span><span class="line" data-line="212">
</span><span class="line" data-line="213"><span style="color: #859289;">&quot; Funcref (|Funcref|)</span>
</span><span class="line" data-line="214"><span style="color: #859289;">&quot; #######</span>
</span><span class="line" data-line="215"><span style="color: #859289;">&quot;</span>
</span><span class="line" data-line="216"><span style="color: #859289;">&quot; Reference to a function, uses the function name as a string for construction.</span>
</span><span class="line" data-line="217"><span style="color: #859289;">&quot; When stored in a variable the name of the variable has the same restrictions</span>
</span><span class="line" data-line="218"><span style="color: #859289;">&quot; as a function name (see below).</span>
</span><span class="line" data-line="219">
</span><span class="line" data-line="220"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">function</span><span style="color: #d3c6aa;">(</span><span style="color: #83c092;">&#39;type&#39;</span><span style="color: #d3c6aa;">)</span>                   | &quot; <span style="color: #e69875;">Reference to function type()</span>
</span><span class="line" data-line="221"><span style="color: #859289;">&quot; Note that `funcref(&#39;type&#39;)` will throw an error because the argument must be</span>
</span><span class="line" data-line="222"><span style="color: #859289;">&quot; a user-defined function; see further below for defining your own functions.</span>
</span><span class="line" data-line="223"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">funcref</span><span style="color: #d3c6aa;">(</span><span style="color: #83c092;">&#39;type&#39;</span><span style="color: #d3c6aa;">)</span>                    | &quot; <span style="color: #e69875;">Reference by identity, not name</span>
</span><span class="line" data-line="224"><span style="color: #859289;">&quot; A lambda (|lambda|) is an anonymous function; it can only contain one</span>
</span><span class="line" data-line="225"><span style="color: #859289;">&quot; expression in its body, which is also its implicit return value.</span>
</span><span class="line" data-line="226"><span style="color: #e67e80;">echo</span>  <span style="color: #d3c6aa;">&lbrace;</span><span style="color: #d3c6aa;">x</span> <span style="color: #e69875;">-&gt;</span> <span style="color: #d3c6aa;">x</span> <span style="color: #e69875;">*</span> <span style="color: #d3c6aa;">x</span><span style="color: #d3c6aa;">&rbrace;</span>                       | &quot; <span style="color: #e69875;">Anonymous function</span>
</span><span class="line" data-line="227"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">function</span><span style="color: #d3c6aa;">(</span><span style="color: #83c092;">&#39;substitute&#39;</span><span style="color: #859289;">,</span> <span style="color: #d3c6aa;">[</span><span style="color: #83c092;">&#39;hello&#39;</span><span style="color: #d3c6aa;">]</span><span style="color: #d3c6aa;">)</span>  | &quot; <span style="color: #e69875;">Partial function</span>
</span><span class="line" data-line="228">
</span><span class="line" data-line="229">
</span><span class="line" data-line="230"><span style="color: #859289;">&quot; Regular expression (|regular-expression|)</span>
</span><span class="line" data-line="231"><span style="color: #859289;">&quot; ##################</span>
</span><span class="line" data-line="232"><span style="color: #859289;">&quot;</span>
</span><span class="line" data-line="233"><span style="color: #859289;">&quot; A regular expression pattern is generally a string, but in some cases you can</span>
</span><span class="line" data-line="234"><span style="color: #859289;">&quot; also use a regular expression between a pair of delimiters (usually `/`, but</span>
</span><span class="line" data-line="235"><span style="color: #859289;">&quot; you can choose anything).</span>
</span><span class="line" data-line="236">
</span><span class="line" data-line="237"><span style="color: #859289;">&quot; Substitute &#39;hello&#39; for &#39;Hello&#39;</span>
</span><span class="line" data-line="238"><span style="color: #e67e80;">substitute</span>/hello/Hello/
</span><span class="line" data-line="239">
</span><span class="line" data-line="240">
</span><span class="line" data-line="241"><span style="color: #859289;">&quot; ###########################</span>
</span><span class="line" data-line="242"><span style="color: #859289;">&quot;  Implicit type conversions</span>
</span><span class="line" data-line="243"><span style="color: #859289;">&quot; ###########################</span>
</span><span class="line" data-line="244"><span style="color: #859289;">&quot;</span>
</span><span class="line" data-line="245"><span style="color: #859289;">&quot; Strings are converted to numbers, and numbers to strings when necessary. A</span>
</span><span class="line" data-line="246"><span style="color: #859289;">&quot; number becomes its decimal notation as a string. A string becomes its</span>
</span><span class="line" data-line="247"><span style="color: #859289;">&quot; numerical value if it can be parsed to a number, otherwise it becomes zero.</span>
</span><span class="line" data-line="248">
</span><span class="line" data-line="249"><span style="color: #e67e80;">echo</span>  <span style="color: #83c092;">&quot;1&quot;</span> <span style="color: #e69875;">+</span> <span style="color: #d699b6;">1</span>         | &quot; <span style="color: #e69875;">Number</span>
</span><span class="line" data-line="250"><span style="color: #e67e80;">echo</span>  <span style="color: #83c092;">&quot;1&quot;</span> <span style="color: #e69875;">..</span> <span style="color: #d699b6;">1</span>        | &quot; <span style="color: #e69875;">String</span>
</span><span class="line" data-line="251"><span style="color: #e67e80;">echo</span>  <span style="color: #83c092;">&quot;0xA&quot;</span> <span style="color: #e69875;">+</span> <span style="color: #d699b6;">1</span>       | &quot; <span style="color: #e69875;">Number</span>
</span><span class="line" data-line="252">
</span><span class="line" data-line="253"><span style="color: #859289;">&quot; Strings are treated like numbers when used as booleans</span>
</span><span class="line" data-line="254"><span style="color: #e67e80;">echo</span> <span style="color: #83c092;">&quot;true&quot;</span> <span style="color: #e67e80;">?</span> <span style="color: #d699b6;">1</span> <span style="color: #e67e80;">:</span> <span style="color: #d699b6;">0</span>   | &quot; This string is <span style="color: #e69875;">parsed to 0, which is false</span>
</span><span class="line" data-line="255">
</span><span class="line" data-line="256"><span style="color: #859289;">&quot; ###########</span>
</span><span class="line" data-line="257"><span style="color: #859289;">&quot;  Variables</span>
</span><span class="line" data-line="258"><span style="color: #859289;">&quot; ###########</span>
</span><span class="line" data-line="259"><span style="color: #859289;">&quot;</span>
</span><span class="line" data-line="260"><span style="color: #859289;">&quot; Variables are bound within a scope; if no scope is provided a default is</span>
</span><span class="line" data-line="261"><span style="color: #859289;">&quot; chosen by Vim. Use `:let` and `:const` to bind a value and `:unlet` to unbind</span>
</span><span class="line" data-line="262"><span style="color: #859289;">&quot; it.</span>
</span><span class="line" data-line="263">
</span><span class="line" data-line="264"><span style="color: #e67e80;">let</span> <span style="color: #dbbc7f;">b:</span><span style="color: #d3c6aa;">my_var</span> <span style="color: #e69875;">=</span> <span style="color: #d699b6;">1</span>        | <span style="color: #859289;">&quot; Local to current buffer</span>
</span><span class="line" data-line="265"><span style="color: #e67e80;">let</span> <span style="color: #dbbc7f;">w:</span><span style="color: #d3c6aa;">my_var</span> <span style="color: #e69875;">=</span> <span style="color: #d699b6;">1</span>        | <span style="color: #859289;">&quot; Local to current window</span>
</span><span class="line" data-line="266"><span style="color: #e67e80;">let</span> <span style="color: #dbbc7f;">t:</span><span style="color: #d3c6aa;">my_var</span> <span style="color: #e69875;">=</span> <span style="color: #d699b6;">1</span>        | <span style="color: #859289;">&quot; Local to current tab page</span>
</span><span class="line" data-line="267"><span style="color: #e67e80;">let</span> <span style="color: #dbbc7f;">g:</span><span style="color: #d3c6aa;">my_var</span> <span style="color: #e69875;">=</span> <span style="color: #d699b6;">1</span>        | <span style="color: #859289;">&quot; Global variable</span>
</span><span class="line" data-line="268"><span style="color: #e67e80;">let</span> <span style="color: #dbbc7f;">l:</span><span style="color: #d3c6aa;">my_var</span> <span style="color: #e69875;">=</span> <span style="color: #d699b6;">1</span>        | <span style="color: #859289;">&quot; Local to current function (see functions below)</span>
</span><span class="line" data-line="269"><span style="color: #e67e80;">let</span> <span style="color: #dbbc7f;">s:</span><span style="color: #d3c6aa;">my_var</span> <span style="color: #e69875;">=</span> <span style="color: #d699b6;">1</span>        | <span style="color: #859289;">&quot; Local to current script file</span>
</span><span class="line" data-line="270"><span style="color: #e67e80;">let</span> <span style="color: #dbbc7f;">a:</span><span style="color: #d3c6aa;">my_arg</span> <span style="color: #e69875;">=</span> <span style="color: #d699b6;">1</span>        | <span style="color: #859289;">&quot; Function argument (see functions below)</span>
</span><span class="line" data-line="271">
</span><span class="line" data-line="272"><span style="color: #859289;">&quot; The Vim scope is read-only</span>
</span><span class="line" data-line="273"><span style="color: #e67e80;">echo</span>  v:<span style="color: #d699b6;">true</span>            | &quot; Special built-in <span style="color: #e69875;">Vim variables (|v:var|)</span>
</span><span class="line" data-line="274">
</span><span class="line" data-line="275"><span style="color: #859289;">&quot; Access special Vim memory like variables</span>
</span><span class="line" data-line="276"><span style="color: #e67e80;">let</span> @a <span style="color: #e69875;">=</span> <span style="color: #83c092;">&#39;Hello&#39;</span>        | <span style="color: #859289;">&quot; Register</span>
</span><span class="line" data-line="277"><span style="color: #e67e80;">let</span> <span style="color: #dbbc7f;">$</span><span style="color: #83c092;">PATH</span><span style="color: #e69875;">=</span><span style="color: #83c092;">&#39;&#39;</span>            | <span style="color: #859289;">&quot; Environment variable</span>
</span><span class="line" data-line="278"><span style="color: #e67e80;">let</span> <span style="color: #e69875;">&amp;</span><span style="color: #d699b6;">textwidth</span> <span style="color: #e69875;">=</span> <span style="color: #d699b6;">79</span>     | <span style="color: #859289;">&quot; Option</span>
</span><span class="line" data-line="279"><span style="color: #e67e80;">let</span> <span style="color: #e69875;">&amp;</span><span style="color: #dbbc7f;">l:</span><span style="color: #d699b6;">textwidth</span> <span style="color: #e69875;">=</span> <span style="color: #d699b6;">79</span>   | <span style="color: #859289;">&quot; Local option</span>
</span><span class="line" data-line="280"><span style="color: #e67e80;">let</span> <span style="color: #e69875;">&amp;</span><span style="color: #dbbc7f;">g:</span><span style="color: #d699b6;">textwidth</span> <span style="color: #e69875;">=</span> <span style="color: #d699b6;">79</span>   | <span style="color: #859289;">&quot; Global option</span>
</span><span class="line" data-line="281">
</span><span class="line" data-line="282"><span style="color: #859289;">&quot; Access scopes as dictionaries (can be modified like all dictionaries)</span>
</span><span class="line" data-line="283"><span style="color: #859289;">&quot; See the |dict-functions|, especially |get()|, for access and manipulation</span>
</span><span class="line" data-line="284"><span style="color: #e67e80;">echo</span>  b:                | &quot; <span style="color: #e69875;">All buffer variables</span>
</span><span class="line" data-line="285"><span style="color: #e67e80;">echo</span>  w:                | &quot; <span style="color: #e69875;">All window variables</span>
</span><span class="line" data-line="286"><span style="color: #e67e80;">echo</span>  t:                | &quot; <span style="color: #e69875;">All tab page variables</span>
</span><span class="line" data-line="287"><span style="color: #e67e80;">echo</span>  g:                | &quot; <span style="color: #e69875;">All global variables</span>
</span><span class="line" data-line="288"><span style="color: #e67e80;">echo</span>  l:                | &quot; <span style="color: #e69875;">All local variables</span>
</span><span class="line" data-line="289"><span style="color: #e67e80;">echo</span>  s:                | &quot; <span style="color: #e69875;">All script variables</span>
</span><span class="line" data-line="290"><span style="color: #e67e80;">echo</span>  <span style="color: #dbbc7f;">a:</span>                | &quot; <span style="color: #e69875;">All function arguments</span>
</span><span class="line" data-line="291"><span style="color: #e67e80;">echo</span>  v:                | &quot; <span style="color: #e69875;">All Vim variables</span>
</span><span class="line" data-line="292">
</span><span class="line" data-line="293"><span style="color: #859289;">&quot; Constant variables</span>
</span><span class="line" data-line="294"><span style="color: #e67e80;">const</span> <span style="color: #d3c6aa;">x</span> <span style="color: #e69875;">=</span> <span style="color: #d699b6;">10</span>            | <span style="color: #859289;">&quot; See |:const|, |:lockvar|</span>
</span><span class="line" data-line="295">
</span><span class="line" data-line="296"><span style="color: #859289;">&quot; Function reference variables have the same restrictions as function names</span>
</span><span class="line" data-line="297"><span style="color: #e67e80;">let</span> <span style="color: #d3c6aa;">IsString</span> <span style="color: #e69875;">=</span> <span style="color: #d3c6aa;">&lbrace;</span><span style="color: #d3c6aa;">x</span> <span style="color: #e69875;">-&gt;</span> <span style="color: #a7c080;">type</span><span style="color: #d3c6aa;">(</span><span style="color: #d3c6aa;">x</span><span style="color: #d3c6aa;">)</span> <span style="color: #e69875;">==</span> <span style="color: #a7c080;">type</span><span style="color: #d3c6aa;">(</span><span style="color: #83c092;">&#39;&#39;</span><span style="color: #d3c6aa;">)</span><span style="color: #d3c6aa;">&rbrace;</span>    | <span style="color: #859289;">&quot; Global: capital letter</span>
</span><span class="line" data-line="298"><span style="color: #e67e80;">let</span> <span style="color: #dbbc7f;">s:</span><span style="color: #d3c6aa;">isNumber</span> <span style="color: #e69875;">=</span> <span style="color: #d3c6aa;">&lbrace;</span><span style="color: #d3c6aa;">x</span> <span style="color: #e69875;">-&gt;</span> <span style="color: #a7c080;">type</span><span style="color: #d3c6aa;">(</span><span style="color: #d3c6aa;">x</span><span style="color: #d3c6aa;">)</span> <span style="color: #e69875;">==</span> <span style="color: #a7c080;">type</span><span style="color: #d3c6aa;">(</span><span style="color: #d699b6;">0</span><span style="color: #d3c6aa;">)</span><span style="color: #d3c6aa;">&rbrace;</span>   | <span style="color: #859289;">&quot; Local: any name allowed</span>
</span><span class="line" data-line="299">
</span><span class="line" data-line="300"><span style="color: #859289;">&quot; When omitted the scope `g:` is implied, except in functions, there `l:` is</span>
</span><span class="line" data-line="301"><span style="color: #859289;">&quot; implied.</span>
</span><span class="line" data-line="302">
</span><span class="line" data-line="303">
</span><span class="line" data-line="304"><span style="color: #859289;">&quot; Multiple value binding (list unpacking)</span>
</span><span class="line" data-line="305"><span style="color: #859289;">&quot; #######################################</span>
</span><span class="line" data-line="306"><span style="color: #859289;">&quot;</span>
</span><span class="line" data-line="307"><span style="color: #859289;">&quot; Assign values of list to multiple variables (number of items must match)</span>
</span><span class="line" data-line="308"><span style="color: #e67e80;">let</span> <span style="color: #d3c6aa;">[</span><span style="color: #d3c6aa;">x</span><span style="color: #859289;">,</span> <span style="color: #d3c6aa;">y</span><span style="color: #d3c6aa;">]</span> <span style="color: #e69875;">=</span> <span style="color: #d3c6aa;">[</span><span style="color: #d699b6;">1</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">2</span><span style="color: #d3c6aa;">]</span>
</span><span class="line" data-line="309">
</span><span class="line" data-line="310"><span style="color: #859289;">&quot; Assign the remainder to a rest variable (note the semicolon)</span>
</span><span class="line" data-line="311"><span style="color: #e67e80;">let</span> <span style="color: #d3c6aa;">[</span><span style="color: #d3c6aa;">mother</span><span style="color: #859289;">,</span> <span style="color: #d3c6aa;">father</span>; <span style="color: #d3c6aa;">children</span><span style="color: #d3c6aa;">]</span> <span style="color: #e69875;">=</span> <span style="color: #d3c6aa;">[</span><span style="color: #83c092;">&#39;Alice&#39;</span><span style="color: #859289;">,</span> <span style="color: #83c092;">&#39;Bob&#39;</span><span style="color: #859289;">,</span> <span style="color: #83c092;">&#39;Carol&#39;</span><span style="color: #859289;">,</span> <span style="color: #83c092;">&#39;Dennis&#39;</span><span style="color: #859289;">,</span> <span style="color: #83c092;">&#39;Emily&#39;</span><span style="color: #d3c6aa;">]</span>
</span><span class="line" data-line="312">
</span><span class="line" data-line="313">
</span><span class="line" data-line="314"><span style="color: #859289;">&quot; ##############</span>
</span><span class="line" data-line="315"><span style="color: #859289;">&quot;  Flow control</span>
</span><span class="line" data-line="316"><span style="color: #859289;">&quot; ##############</span>
</span><span class="line" data-line="317">
</span><span class="line" data-line="318"><span style="color: #859289;">&quot; Conditional (|:if|, |:elseif|, |:else|, |:endif|)</span>
</span><span class="line" data-line="319"><span style="color: #859289;">&quot; ###########</span>
</span><span class="line" data-line="320"><span style="color: #859289;">&quot;</span>
</span><span class="line" data-line="321"><span style="color: #859289;">&quot; Conditions are set between `if` and `endif`. They can be nested.</span>
</span><span class="line" data-line="322">
</span><span class="line" data-line="323"><span style="color: #e67e80;">let</span> <span style="color: #d3c6aa;">condition</span> <span style="color: #e69875;">=</span> v:<span style="color: #d699b6;">true</span>
</span><span class="line" data-line="324">
</span><span class="line" data-line="325"><span style="color: #e67e80;">if</span> <span style="color: #d3c6aa;">condition</span>
</span><span class="line" data-line="326">    <span style="color: #e67e80;">echo</span> <span style="color: #83c092;">&#39;First condition&#39;</span>
</span><span class="line" data-line="327"><span style="color: #e67e80;">elseif</span> <span style="color: #d3c6aa;">another_condition</span>
</span><span class="line" data-line="328">    <span style="color: #e67e80;">echo</span> <span style="color: #83c092;">&#39;Second condition&#39;</span>
</span><span class="line" data-line="329"><span style="color: #e67e80;">else</span>
</span><span class="line" data-line="330">    <span style="color: #e67e80;">echo</span> <span style="color: #83c092;">&#39;Fail&#39;</span>
</span><span class="line" data-line="331"><span style="color: #e67e80;">endif</span>
</span><span class="line" data-line="332">
</span><span class="line" data-line="333"><span style="color: #859289;">&quot; Loops (|:for|, |:endfor|, |:while|, |:endwhile|, |:break|, |:continue|)</span>
</span><span class="line" data-line="334"><span style="color: #859289;">&quot; #####</span>
</span><span class="line" data-line="335"><span style="color: #859289;">&quot;</span>
</span><span class="line" data-line="336"><span style="color: #859289;">&quot; Two types of loops: `:for` and `:while`. Use `:continue` to skip to the next</span>
</span><span class="line" data-line="337"><span style="color: #859289;">&quot; iteration, `:break` to break out of the loop.</span>
</span><span class="line" data-line="338">
</span><span class="line" data-line="339"><span style="color: #859289;">&quot; For-loop (|:for|, |:endfor|)</span>
</span><span class="line" data-line="340"><span style="color: #859289;">&quot; ========</span>
</span><span class="line" data-line="341"><span style="color: #859289;">&quot;</span>
</span><span class="line" data-line="342"><span style="color: #859289;">&quot; For-loops iterate over lists and nothing else. If you want to iterate over</span>
</span><span class="line" data-line="343"><span style="color: #859289;">&quot; another sequence you need to use a function which will create a list.</span>
</span><span class="line" data-line="344">
</span><span class="line" data-line="345"><span style="color: #859289;">&quot; Iterate over a list</span>
</span><span class="line" data-line="346"><span style="color: #e67e80;">for</span> <span style="color: #d3c6aa;">person</span> <span style="color: #e67e80;">in</span> <span style="color: #d3c6aa;">[</span><span style="color: #83c092;">&#39;Alice&#39;</span><span style="color: #859289;">,</span> <span style="color: #83c092;">&#39;Bob&#39;</span><span style="color: #859289;">,</span> <span style="color: #83c092;">&#39;Carol&#39;</span><span style="color: #859289;">,</span> <span style="color: #83c092;">&#39;Dennis&#39;</span><span style="color: #859289;">,</span> <span style="color: #83c092;">&#39;Emily&#39;</span><span style="color: #d3c6aa;">]</span>
</span><span class="line" data-line="347">    <span style="color: #e67e80;">echo</span> <span style="color: #83c092;">&#39;Hello &#39;</span> <span style="color: #e69875;">..</span> <span style="color: #d3c6aa;">person</span>
</span><span class="line" data-line="348"><span style="color: #e67e80;">endfor</span>
</span><span class="line" data-line="349">
</span><span class="line" data-line="350"><span style="color: #859289;">&quot; Iterate over a nested list by unpacking it</span>
</span><span class="line" data-line="351"><span style="color: #e67e80;">for</span> <span style="color: #d3c6aa;">[</span><span style="color: #d3c6aa;">x</span><span style="color: #859289;">,</span> <span style="color: #d3c6aa;">y</span><span style="color: #d3c6aa;">]</span> <span style="color: #e67e80;">in</span> <span style="color: #d3c6aa;">[</span><span style="color: #d3c6aa;">[</span><span style="color: #d699b6;">1</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">0</span><span style="color: #d3c6aa;">]</span><span style="color: #859289;">,</span> <span style="color: #d3c6aa;">[</span><span style="color: #d699b6;">0</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">1</span><span style="color: #d3c6aa;">]</span><span style="color: #859289;">,</span> <span style="color: #d3c6aa;">[</span><span style="color: #d699b6;">-1</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">0</span><span style="color: #d3c6aa;">]</span><span style="color: #859289;">,</span> <span style="color: #d3c6aa;">[</span><span style="color: #d699b6;">0</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">-1</span><span style="color: #d3c6aa;">]</span><span style="color: #d3c6aa;">]</span>
</span><span class="line" data-line="352">    <span style="color: #e67e80;">echo</span> <span style="color: #83c092;">&#39;Position: x =&#39;</span>  <span style="color: #e69875;">..</span> <span style="color: #d3c6aa;">x</span> <span style="color: #e69875;">..</span> <span style="color: #83c092;">&#39;, y = &#39;</span> <span style="color: #e69875;">..</span> <span style="color: #d3c6aa;">y</span>
</span><span class="line" data-line="353"><span style="color: #e67e80;">endfor</span>
</span><span class="line" data-line="354">
</span><span class="line" data-line="355"><span style="color: #859289;">&quot; Iterate over a range of numbers</span>
</span><span class="line" data-line="356"><span style="color: #e67e80;">for</span> <span style="color: #d3c6aa;">i</span> <span style="color: #e67e80;">in</span> <span style="color: #a7c080;">range</span><span style="color: #d3c6aa;">(</span><span style="color: #d699b6;">10</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">0</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">-1</span><span style="color: #d3c6aa;">)</span>  <span style="color: #859289;">&quot; Count down from 10</span>
</span><span class="line" data-line="357">    <span style="color: #e67e80;">echo</span> <span style="color: #83c092;">&#39;T minus&#39;</span>  <span style="color: #e69875;">..</span> <span style="color: #d3c6aa;">i</span>
</span><span class="line" data-line="358"><span style="color: #e67e80;">endfor</span>
</span><span class="line" data-line="359">
</span><span class="line" data-line="360"><span style="color: #859289;">&quot; Iterate over the keys of a dictionary</span>
</span><span class="line" data-line="361"><span style="color: #e67e80;">for</span> <span style="color: #d3c6aa;">symbol</span> <span style="color: #e67e80;">in</span> <span style="color: #a7c080;">keys</span><span style="color: #d3c6aa;">(</span><span style="color: #d3c6aa;">&lbrace;</span><span style="color: #83c092;">&#39;π&#39;</span><span style="color: #859289;">:</span> <span style="color: #d699b6;">3.14</span><span style="color: #859289;">,</span> <span style="color: #83c092;">&#39;e&#39;</span><span style="color: #859289;">:</span> <span style="color: #d699b6;">2.71</span><span style="color: #d3c6aa;">&rbrace;</span><span style="color: #d3c6aa;">)</span>
</span><span class="line" data-line="362">    <span style="color: #e67e80;">echo</span> <span style="color: #83c092;">&#39;The constant &#39;</span> <span style="color: #e69875;">..</span> <span style="color: #d3c6aa;">symbol</span> <span style="color: #e69875;">..</span> <span style="color: #83c092;">&#39; is a transcendent number&#39;</span>
</span><span class="line" data-line="363"><span style="color: #e67e80;">endfor</span>
</span><span class="line" data-line="364">
</span><span class="line" data-line="365"><span style="color: #859289;">&quot; Iterate over the values of a dictionary</span>
</span><span class="line" data-line="366"><span style="color: #e67e80;">for</span> <span style="color: #d3c6aa;">value</span> <span style="color: #e67e80;">in</span> <span style="color: #a7c080;">values</span><span style="color: #d3c6aa;">(</span><span style="color: #d3c6aa;">&lbrace;</span><span style="color: #83c092;">&#39;π&#39;</span><span style="color: #859289;">:</span> <span style="color: #d699b6;">3.14</span><span style="color: #859289;">,</span> <span style="color: #83c092;">&#39;e&#39;</span><span style="color: #859289;">:</span> <span style="color: #d699b6;">2.71</span><span style="color: #d3c6aa;">&rbrace;</span><span style="color: #d3c6aa;">)</span>
</span><span class="line" data-line="367">    <span style="color: #e67e80;">echo</span> <span style="color: #83c092;">&#39;The value &#39;</span> <span style="color: #e69875;">..</span> <span style="color: #d3c6aa;">value</span> <span style="color: #e69875;">..</span> <span style="color: #83c092;">&#39; approximates a transcendent number&#39;</span>
</span><span class="line" data-line="368"><span style="color: #e67e80;">endfor</span>
</span><span class="line" data-line="369">
</span><span class="line" data-line="370"><span style="color: #859289;">&quot; Iterate over the keys and values of a dictionary</span>
</span><span class="line" data-line="371"><span style="color: #e67e80;">for</span> <span style="color: #d3c6aa;">[</span><span style="color: #d3c6aa;">symbol</span><span style="color: #859289;">,</span> <span style="color: #d3c6aa;">value</span><span style="color: #d3c6aa;">]</span> <span style="color: #e67e80;">in</span> <span style="color: #a7c080;">items</span><span style="color: #d3c6aa;">(</span><span style="color: #d3c6aa;">&lbrace;</span><span style="color: #83c092;">&#39;π&#39;</span><span style="color: #859289;">:</span> <span style="color: #d699b6;">3.14</span><span style="color: #859289;">,</span> <span style="color: #83c092;">&#39;e&#39;</span><span style="color: #859289;">:</span> <span style="color: #d699b6;">2.71</span><span style="color: #d3c6aa;">&rbrace;</span><span style="color: #d3c6aa;">)</span>
</span><span class="line" data-line="372">    <span style="color: #e67e80;">echo</span> <span style="color: #83c092;">&#39;The number &#39;</span> <span style="color: #e69875;">..</span> <span style="color: #d3c6aa;">symbol</span> <span style="color: #e69875;">..</span> <span style="color: #83c092;">&#39; is approximately &#39;</span> <span style="color: #e69875;">..</span> <span style="color: #d3c6aa;">value</span>
</span><span class="line" data-line="373"><span style="color: #e67e80;">endfor</span>
</span><span class="line" data-line="374">
</span><span class="line" data-line="375"><span style="color: #859289;">&quot; While-loops (|:while|, |:endwhile|)</span>
</span><span class="line" data-line="376">
</span><span class="line" data-line="377"><span style="color: #e67e80;">let</span> <span style="color: #d3c6aa;">there_yet</span> <span style="color: #e69875;">=</span> v:<span style="color: #d699b6;">true</span>
</span><span class="line" data-line="378"><span style="color: #e67e80;">while</span> <span style="color: #e69875;">!</span><span style="color: #d3c6aa;">there_yet</span>
</span><span class="line" data-line="379">    <span style="color: #e67e80;">echo</span> <span style="color: #83c092;">&#39;Are we there yet?&#39;</span>
</span><span class="line" data-line="380"><span style="color: #e67e80;">endwhile</span>
</span><span class="line" data-line="381">
</span><span class="line" data-line="382">
</span><span class="line" data-line="383"><span style="color: #859289;">&quot; Exception handling (|exception-handling|)</span>
</span><span class="line" data-line="384"><span style="color: #859289;">&quot; ##################</span>
</span><span class="line" data-line="385"><span style="color: #859289;">&quot;</span>
</span><span class="line" data-line="386"><span style="color: #859289;">&quot; Throw new exceptions as strings, catch them by pattern-matching a regular</span>
</span><span class="line" data-line="387"><span style="color: #859289;">&quot; expression against the string</span>
</span><span class="line" data-line="388">
</span><span class="line" data-line="389"><span style="color: #859289;">&quot; Throw new exception</span>
</span><span class="line" data-line="390"><span style="color: #e67e80;">throw</span> <span style="color: #83c092;">&quot;Wrong arguments&quot;</span>
</span><span class="line" data-line="391">
</span><span class="line" data-line="392"><span style="color: #859289;">&quot; Guard against an exception (the second catch matches any exception)</span>
</span><span class="line" data-line="393"><span style="color: #e67e80;">try</span>
</span><span class="line" data-line="394">    <span style="color: #e67e80;">source</span> <span style="color: #dbbc7f;">path/to/file</span>
</span><span class="line" data-line="395"><span style="color: #e67e80;">catch</span> <span style="color: #dbbc7f;">/Cannot open/</span>
</span><span class="line" data-line="396">    <span style="color: #e67e80;">echo</span> <span style="color: #83c092;">&#39;Looks like that file does not exist&#39;</span>
</span><span class="line" data-line="397"><span style="color: #e67e80;">catch</span> <span style="color: #dbbc7f;">/.*/</span>
</span><span class="line" data-line="398">    <span style="color: #e67e80;">echo</span> <span style="color: #83c092;">&#39;Something went wrong, but I do not know what&#39;</span>
</span><span class="line" data-line="399"><span style="color: #e67e80;">finally</span>
</span><span class="line" data-line="400">    <span style="color: #e67e80;">echo</span> <span style="color: #83c092;">&#39;I am done trying&#39;</span>
</span><span class="line" data-line="401"><span style="color: #e67e80;">endtry</span>
</span><span class="line" data-line="402">
</span><span class="line" data-line="403">
</span><span class="line" data-line="404"><span style="color: #859289;">&quot; ##########</span>
</span><span class="line" data-line="405"><span style="color: #859289;">&quot;  Functions</span>
</span><span class="line" data-line="406"><span style="color: #859289;">&quot; ##########</span>
</span><span class="line" data-line="407">
</span><span class="line" data-line="408"><span style="color: #859289;">&quot; Defining functions (|:function|, |:endfunction|)</span>
</span><span class="line" data-line="409"><span style="color: #859289;">&quot; ##################</span>
</span><span class="line" data-line="410">
</span><span class="line" data-line="411"><span style="color: #859289;">&quot; Unscoped function names have to start with a capital letter</span>
</span><span class="line" data-line="412"><span style="color: #e67e80;">function</span><span style="color: #7fbbb3;">!</span> <span style="color: #a7c080;">AddNumbersLoudly</span><span style="color: #d3c6aa;">(</span><span style="color: #d3c6aa;">x</span><span style="color: #859289;">,</span> <span style="color: #d3c6aa;">y</span><span style="color: #d3c6aa;">)</span>
</span><span class="line" data-line="413">    <span style="color: #859289;">&quot; Use a: scope to access arguments</span>
</span><span class="line" data-line="414">    <span style="color: #e67e80;">echo</span> <span style="color: #83c092;">&#39;Adding&#39;</span>  <span style="color: #e69875;">..</span> <span style="color: #dbbc7f;">a:</span><span style="color: #d3c6aa;">x</span> <span style="color: #e69875;">..</span>  <span style="color: #83c092;">&#39;and&#39;</span>  <span style="color: #e69875;">..</span> <span style="color: #dbbc7f;">a:</span><span style="color: #d3c6aa;">y</span>   | &quot; <span style="color: #e69875;">A side effect</span>
</span><span class="line" data-line="415">    <span style="color: #e67e80;">return</span> <span style="color: #dbbc7f;">a:</span><span style="color: #d3c6aa;">x</span> <span style="color: #e69875;">+</span> <span style="color: #dbbc7f;">a:</span><span style="color: #d3c6aa;">y</span>                          | <span style="color: #859289;">&quot; A return value</span>
</span><span class="line" data-line="416"><span style="color: #e67e80;">endfunction</span>
</span><span class="line" data-line="417">
</span><span class="line" data-line="418"><span style="color: #859289;">&quot; Scoped function names may start with a lower-case letter</span>
</span><span class="line" data-line="419"><span style="color: #e67e80;">function</span><span style="color: #7fbbb3;">!</span> <span style="color: #a7c080;"><span style="color: #dbbc7f;">s:</span><span style="color: #d3c6aa;">addNumbersLoudly</span></span><span style="color: #d3c6aa;">(</span><span style="color: #d3c6aa;">x</span><span style="color: #859289;">,</span> <span style="color: #d3c6aa;">y</span><span style="color: #d3c6aa;">)</span>
</span><span class="line" data-line="420">    <span style="color: #e67e80;">echo</span> <span style="color: #83c092;">&#39;Adding&#39;</span>  <span style="color: #e69875;">..</span> <span style="color: #dbbc7f;">a:</span><span style="color: #d3c6aa;">x</span> <span style="color: #e69875;">..</span>  <span style="color: #83c092;">&#39;and&#39;</span>  <span style="color: #e69875;">..</span> <span style="color: #dbbc7f;">a:</span><span style="color: #d3c6aa;">y</span>
</span><span class="line" data-line="421">    <span style="color: #e67e80;">return</span> <span style="color: #dbbc7f;">a:</span><span style="color: #d3c6aa;">x</span> <span style="color: #e69875;">+</span> <span style="color: #dbbc7f;">a:</span><span style="color: #d3c6aa;">y</span>
</span><span class="line" data-line="422"><span style="color: #e67e80;">endfunction</span>
</span><span class="line" data-line="423">
</span><span class="line" data-line="424"><span style="color: #859289;">&quot; Without the exclamation mark it would be an error to re-define a function,</span>
</span><span class="line" data-line="425"><span style="color: #859289;">&quot; with the exclamation mark the new definition can replace the old one. Since</span>
</span><span class="line" data-line="426"><span style="color: #859289;">&quot; Vim script files can be reloaded several times over the course of a session</span>
</span><span class="line" data-line="427"><span style="color: #859289;">&quot; it is best to use the exclamation mark unless you really know what you are</span>
</span><span class="line" data-line="428"><span style="color: #859289;">&quot; doing.</span>
</span><span class="line" data-line="429">
</span><span class="line" data-line="430"><span style="color: #859289;">&quot; Function definitions can have special qualifiers following the argument list.</span>
</span><span class="line" data-line="431">
</span><span class="line" data-line="432"><span style="color: #859289;">&quot; Range functions define two implicit arguments, which will be set to the range</span>
</span><span class="line" data-line="433"><span style="color: #859289;">&quot; of the ex-command</span>
</span><span class="line" data-line="434"><span style="color: #e67e80;">function</span><span style="color: #7fbbb3;">!</span> <span style="color: #a7c080;">FirstAndLastLine</span><span style="color: #d3c6aa;">(</span><span style="color: #d3c6aa;">)</span> range
</span><span class="line" data-line="435">    <span style="color: #e67e80;">echo</span> <span style="color: #d3c6aa;">[</span><span style="color: #dbbc7f;">a:</span><span style="color: #d3c6aa;">firstline</span><span style="color: #859289;">,</span> <span style="color: #dbbc7f;">a:</span><span style="color: #d3c6aa;">lastline</span><span style="color: #d3c6aa;">]</span>
</span><span class="line" data-line="436"><span style="color: #e67e80;">endfunction</span>
</span><span class="line" data-line="437">
</span><span class="line" data-line="438"><span style="color: #859289;">&quot; Prints the first and last line that match a pattern (|cmdline-ranges|)</span>
</span><span class="line" data-line="439"><span style="color: #e69875;">/</span><span style="color: #dbbc7f;">^#</span><span style="color: #7fbbb3;">!</span><span style="color: #83c092;">/,/<span style="color: #7fbbb3;">!</span>#$/call FirstAndLastLine()</span>
</span><span class="line" data-line="440">
</span><span class="line" data-line="441"><span style="color: #859289;">&quot; Aborting functions, abort once error occurs (|:func-abort|)</span>
</span><span class="line" data-line="442"><span style="color: #e67e80;">function</span><span style="color: #7fbbb3;">!</span> <span style="color: #a7c080;">SourceMyFile</span><span style="color: #d3c6aa;">(</span><span style="color: #d3c6aa;">)</span> <span style="color: #e67e80;">abort</span>
</span><span class="line" data-line="443">    <span style="color: #e67e80;">source</span> <span style="color: #dbbc7f;">my-file.vim</span>        | <span style="color: #859289;">&quot; Try sourcing non-existing file</span>
</span><span class="line" data-line="444">    <span style="color: #e67e80;">echo</span> <span style="color: #83c092;">&#39;This will never be printed&#39;</span>
</span><span class="line" data-line="445"><span style="color: #e67e80;">endfunction</span>
</span><span class="line" data-line="446">
</span><span class="line" data-line="447"><span style="color: #859289;">&quot; Closures, functions carrying values from outer scope (|:func-closure|)</span>
</span><span class="line" data-line="448"><span style="color: #e67e80;">function</span><span style="color: #7fbbb3;">!</span> <span style="color: #a7c080;">MakeAdder</span><span style="color: #d3c6aa;">(</span><span style="color: #d3c6aa;">x</span><span style="color: #d3c6aa;">)</span>
</span><span class="line" data-line="449">    <span style="color: #e67e80;">function</span><span style="color: #7fbbb3;">!</span> <span style="color: #a7c080;">Adder</span><span style="color: #d3c6aa;">(</span><span style="color: #d3c6aa;">n</span><span style="color: #d3c6aa;">)</span> closure
</span><span class="line" data-line="450">        <span style="color: #e67e80;">return</span> <span style="color: #dbbc7f;">a:</span><span style="color: #d3c6aa;">n</span> <span style="color: #e69875;">+</span> <span style="color: #dbbc7f;">a:</span><span style="color: #d3c6aa;">x</span>
</span><span class="line" data-line="451">    <span style="color: #e67e80;">endfunction</span>
</span><span class="line" data-line="452">    <span style="color: #e67e80;">return</span> <span style="color: #a7c080;">funcref</span><span style="color: #d3c6aa;">(</span><span style="color: #83c092;">&#39;Adder&#39;</span><span style="color: #d3c6aa;">)</span>
</span><span class="line" data-line="453"><span style="color: #e67e80;">endfunction</span>
</span><span class="line" data-line="454"><span style="color: #e67e80;">let</span> <span style="color: #d3c6aa;">AddFive</span> <span style="color: #e69875;">=</span> <span style="color: #a7c080;">MakeAdder</span><span style="color: #d3c6aa;">(</span><span style="color: #d699b6;">5</span><span style="color: #d3c6aa;">)</span>
</span><span class="line" data-line="455"><span style="color: #e67e80;">echo</span> <span style="color: #a7c080;">AddFive</span><span style="color: #d3c6aa;">(</span><span style="color: #d699b6;">3</span><span style="color: #d3c6aa;">)</span>               | &quot; <span style="color: #e69875;">Prints 8</span>
</span><span class="line" data-line="456">
</span><span class="line" data-line="457"><span style="color: #859289;">&quot; Dictionary functions, poor man&#39;s OOP methods (|Dictionary-function|)</span>
</span><span class="line" data-line="458"><span style="color: #e67e80;">function</span><span style="color: #7fbbb3;">!</span> <span style="color: #a7c080;">Mylen</span><span style="color: #d3c6aa;">(</span><span style="color: #d3c6aa;">)</span> dict
</span><span class="line" data-line="459">    <span style="color: #e67e80;">return</span> <span style="color: #a7c080;">len</span><span style="color: #d3c6aa;">(</span><span style="color: #d3c6aa;">self</span><span style="color: #859289;">.</span><span style="color: #d3c6aa;">data</span><span style="color: #d3c6aa;">)</span>     | <span style="color: #859289;">&quot; Implicit variable self</span>
</span><span class="line" data-line="460"><span style="color: #e67e80;">endfunction</span>
</span><span class="line" data-line="461"><span style="color: #e67e80;">let</span> <span style="color: #d3c6aa;">mydict</span> <span style="color: #e69875;">=</span> <span style="color: #d3c6aa;">&lbrace;</span><span style="color: #83c092;">&#39;data&#39;</span><span style="color: #859289;">:</span> <span style="color: #d3c6aa;">[</span><span style="color: #d699b6;">0</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">1</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">2</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">3</span><span style="color: #d3c6aa;">]</span><span style="color: #859289;">,</span> <span style="color: #83c092;">&#39;len&#39;</span><span style="color: #859289;">:</span> <span style="color: #a7c080;">function</span><span style="color: #d3c6aa;">(</span><span style="color: #83c092;">&quot;Mylen&quot;</span><span style="color: #d3c6aa;">)</span><span style="color: #d3c6aa;">&rbrace;</span>
</span><span class="line" data-line="462"><span style="color: #e67e80;">echo</span> <span style="color: #d3c6aa;">mydict</span><span style="color: #859289;">.</span><span style="color: #d3c6aa;">len</span><span style="color: #d3c6aa;">(</span><span style="color: #d3c6aa;">)</span>
</span><span class="line" data-line="463">
</span><span class="line" data-line="464"><span style="color: #859289;">&quot; Alternatively, more concise</span>
</span><span class="line" data-line="465"><span style="color: #e67e80;">let</span> <span style="color: #d3c6aa;">mydict</span> <span style="color: #e69875;">=</span> <span style="color: #d3c6aa;">&lbrace;</span><span style="color: #83c092;">&#39;data&#39;</span><span style="color: #859289;">:</span> <span style="color: #d3c6aa;">[</span><span style="color: #d699b6;">0</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">1</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">2</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">3</span><span style="color: #d3c6aa;">]</span><span style="color: #d3c6aa;">&rbrace;</span>
</span><span class="line" data-line="466"><span style="color: #e67e80;">function</span><span style="color: #7fbbb3;">!</span> <span style="color: #a7c080;"><span style="color: #d3c6aa;">mydict</span><span style="color: #859289;">.</span><span style="color: #d3c6aa;">len</span></span><span style="color: #d3c6aa;">(</span><span style="color: #d3c6aa;">)</span>
</span><span class="line" data-line="467">    <span style="color: #e67e80;">return</span> <span style="color: #a7c080;">len</span><span style="color: #d3c6aa;">(</span><span style="color: #d3c6aa;">self</span><span style="color: #859289;">.</span><span style="color: #d3c6aa;">data</span><span style="color: #d3c6aa;">)</span>
</span><span class="line" data-line="468"><span style="color: #e67e80;">endfunction</span>
</span><span class="line" data-line="469">
</span><span class="line" data-line="470"><span style="color: #859289;">&quot; Calling functions (|:call|)</span>
</span><span class="line" data-line="471"><span style="color: #859289;">&quot; #################</span>
</span><span class="line" data-line="472">
</span><span class="line" data-line="473"><span style="color: #859289;">&quot; Call a function for its return value, and possibly for its side effects</span>
</span><span class="line" data-line="474"><span style="color: #e67e80;">let</span> <span style="color: #d3c6aa;">animals</span> <span style="color: #e69875;">=</span> <span style="color: #a7c080;">keys</span><span style="color: #d3c6aa;">(</span><span style="color: #d3c6aa;">&lbrace;</span><span style="color: #83c092;">&#39;cow&#39;</span><span style="color: #859289;">:</span> <span style="color: #83c092;">&#39;moo&#39;</span><span style="color: #859289;">,</span> <span style="color: #83c092;">&#39;dog&#39;</span><span style="color: #859289;">:</span> <span style="color: #83c092;">&#39;woof&#39;</span><span style="color: #859289;">,</span> <span style="color: #83c092;">&#39;cat&#39;</span><span style="color: #859289;">:</span> <span style="color: #83c092;">&#39;meow&#39;</span><span style="color: #d3c6aa;">&rbrace;</span><span style="color: #d3c6aa;">)</span>
</span><span class="line" data-line="475">
</span><span class="line" data-line="476"><span style="color: #859289;">&quot; Call a function for its side effects only, ignore potential return value</span>
</span><span class="line" data-line="477"><span style="color: #e67e80;">call</span> <span style="color: #a7c080;">sign_undefine</span><span style="color: #d3c6aa;">(</span><span style="color: #d3c6aa;">)</span>
</span><span class="line" data-line="478">
</span><span class="line" data-line="479"><span style="color: #859289;">&quot; The call() function calls a function reference and passes parameters as a</span>
</span><span class="line" data-line="480"><span style="color: #859289;">&quot; list, and returns the function&#39;s result.</span>
</span><span class="line" data-line="481"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">call</span><span style="color: #d3c6aa;">(</span><span style="color: #a7c080;">function</span><span style="color: #d3c6aa;">(</span><span style="color: #83c092;">&#39;get&#39;</span><span style="color: #d3c6aa;">)</span><span style="color: #859289;">,</span> <span style="color: #d3c6aa;">[</span><span style="color: #d3c6aa;">&lbrace;</span><span style="color: #83c092;">&#39;a&#39;</span><span style="color: #859289;">:</span> <span style="color: #d699b6;">1</span><span style="color: #859289;">,</span> <span style="color: #83c092;">&#39;b&#39;</span><span style="color: #859289;">:</span> <span style="color: #d699b6;">2</span><span style="color: #d3c6aa;">&rbrace;</span><span style="color: #859289;">,</span> <span style="color: #83c092;">&#39;c&#39;</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">3</span><span style="color: #d3c6aa;">]</span><span style="color: #d3c6aa;">)</span>   | &quot; <span style="color: #e69875;">Prints 3</span>
</span><span class="line" data-line="482">
</span><span class="line" data-line="483"><span style="color: #859289;">&quot; Recall that Vim script is embedded within the ex-commands, that is why we</span>
</span><span class="line" data-line="484"><span style="color: #859289;">&quot; cannot just call a function directly, we have to use the `:call` ex-command.</span>
</span><span class="line" data-line="485">
</span><span class="line" data-line="486"><span style="color: #859289;">&quot; Function namespaces (|write-library-script|, |autoload|)</span>
</span><span class="line" data-line="487"><span style="color: #859289;">&quot; ###################</span>
</span><span class="line" data-line="488">
</span><span class="line" data-line="489"><span style="color: #859289;">&quot; Must be defined in autoload/foo/bar.vim</span>
</span><span class="line" data-line="490"><span style="color: #859289;">&quot; Namspaced function names do not have to start with a capital letter</span>
</span><span class="line" data-line="491"><span style="color: #e67e80;">function</span><span style="color: #7fbbb3;">!</span> <span style="color: #a7c080;">foo#bar#log</span><span style="color: #d3c6aa;">(</span><span style="color: #d3c6aa;">value</span><span style="color: #d3c6aa;">)</span>
</span><span class="line" data-line="492">    <span style="color: #e67e80;">echomsg</span> <span style="color: #d3c6aa;">value</span>
</span><span class="line" data-line="493"><span style="color: #e67e80;">endfunction</span>
</span><span class="line" data-line="494">
</span><span class="line" data-line="495"><span style="color: #e67e80;">call</span> <span style="color: #a7c080;">foo#bar#log</span><span style="color: #d3c6aa;">(</span><span style="color: #83c092;">&#39;Hello&#39;</span><span style="color: #d3c6aa;">)</span>
</span><span class="line" data-line="496">
</span><span class="line" data-line="497">
</span><span class="line" data-line="498"><span style="color: #859289;">&quot; #############################</span>
</span><span class="line" data-line="499"><span style="color: #859289;">&quot;  Frequently used ex-commands</span>
</span><span class="line" data-line="500"><span style="color: #859289;">&quot; #############################</span>
</span><span class="line" data-line="501">
</span><span class="line" data-line="502">
</span><span class="line" data-line="503"><span style="color: #859289;">&quot; Sourcing runtime files (|&#39;runtimepath&#39;|)</span>
</span><span class="line" data-line="504"><span style="color: #859289;">&quot; ######################</span>
</span><span class="line" data-line="505">
</span><span class="line" data-line="506"><span style="color: #859289;">&quot; Source first match among runtime paths</span>
</span><span class="line" data-line="507"><span style="color: #e67e80;">runtime</span> <span style="color: #dbbc7f;">plugin/my-plugin.vim</span>
</span><span class="line" data-line="508">
</span><span class="line" data-line="509">
</span><span class="line" data-line="510"><span style="color: #859289;">&quot; Defining new ex-commands (|40.2|, |:command|)</span>
</span><span class="line" data-line="511"><span style="color: #859289;">&quot; ########################</span>
</span><span class="line" data-line="512">
</span><span class="line" data-line="513"><span style="color: #859289;">&quot; First argument here is the name of the command, rest is the command body</span>
</span><span class="line" data-line="514"><span style="color: #e67e80;">command</span><span style="color: #7fbbb3;">!</span> <span style="color: #a7c080;">SwapAdjacentLines</span><span style="color: #83c092;"> normal! ddp</span>
</span><span class="line" data-line="515">
</span><span class="line" data-line="516"><span style="color: #859289;">&quot; The exclamation mark works the same as with `:function`. User-defined</span>
</span><span class="line" data-line="517"><span style="color: #859289;">&quot; commands must start with a capital letter. The `:command` command can take a</span>
</span><span class="line" data-line="518"><span style="color: #859289;">&quot; number of attributes (some of which have their own parameters with `=`), such</span>
</span><span class="line" data-line="519"><span style="color: #859289;">&quot; as `-nargs`, all of them start with a dash to set them apart from the command</span>
</span><span class="line" data-line="520"><span style="color: #859289;">&quot; name.</span>
</span><span class="line" data-line="521">
</span><span class="line" data-line="522"><span style="color: #e67e80;">command</span><span style="color: #7fbbb3;">!</span> <span style="color: #7fbbb3;">-nargs</span><span style="color: #e69875;">=</span><span style="color: #d699b6;">1</span> <span style="color: #a7c080;">Error</span><span style="color: #83c092;"> echoerr &lt;args&gt;</span>
</span><span class="line" data-line="523">
</span><span class="line" data-line="524">
</span><span class="line" data-line="525"><span style="color: #859289;">&quot; Defining auto-commands (|40.3|, |autocmd|, |autocommand-events|)</span>
</span><span class="line" data-line="526"><span style="color: #859289;">&quot; ######################</span>
</span><span class="line" data-line="527">
</span><span class="line" data-line="528"><span style="color: #859289;">&quot; The arguments are &quot;events&quot;, &quot;patterns&quot;, rest is &quot;commands&quot;</span>
</span><span class="line" data-line="529"><span style="color: #e67e80;">autocmd</span> <span style="color: #83c092;">BufWritePost</span> <span style="color: #859289;"><span style="color: #dbbc7f;">$</span>MYVIMRC</span> <span style="color: #e67e80;">source</span> <span style="color: #dbbc7f;">$MYVIMRC</span>
</span><span class="line" data-line="530">
</span><span class="line" data-line="531"><span style="color: #859289;">&quot; Events and patterns are separated by commas with no space between. See</span>
</span><span class="line" data-line="532"><span style="color: #859289;">&quot; |autocmd-events| for standard events, |User| for custom events. Everything</span>
</span><span class="line" data-line="533"><span style="color: #859289;">&quot; else are the ex-commands which will be executed.</span>
</span><span class="line" data-line="534">
</span><span class="line" data-line="535"><span style="color: #859289;">&quot; Auto groups</span>
</span><span class="line" data-line="536"><span style="color: #859289;">&quot; ===========</span>
</span><span class="line" data-line="537"><span style="color: #859289;">&quot;</span>
</span><span class="line" data-line="538"><span style="color: #859289;">&quot; When a file is sourced multiple times the auto-commands are defined anew,</span>
</span><span class="line" data-line="539"><span style="color: #859289;">&quot; without deleting the old ones, causing auto-commands to pile up over time.</span>
</span><span class="line" data-line="540"><span style="color: #859289;">&quot; Use auto-groups and the following ritual to guard against this.</span>
</span><span class="line" data-line="541">
</span><span class="line" data-line="542"><span style="color: #e67e80;">augroup</span> <span style="color: #dbbc7f;">auto</span>-source   | &quot; The name <span style="color: #e69875;">of the group is arbitrary</span>
</span><span class="line" data-line="543">    <span style="color: #e67e80;">autocmd</span><span style="color: #7fbbb3;">!</span>          | <span style="color: #859289;">&quot; Deletes all auto-commands in the current group</span>
</span><span class="line" data-line="544">    <span style="color: #e67e80;">autocmd</span> <span style="color: #83c092;">BufWritePost</span> <span style="color: #859289;"><span style="color: #dbbc7f;">$</span>MYVIMRC</span> <span style="color: #e67e80;">source</span> <span style="color: #dbbc7f;">$MYVIMRC</span>
</span><span class="line" data-line="545"><span style="color: #e67e80;">augroup</span> <span style="color: #dbbc7f;">END</span>           | &quot; Switch back to <span style="color: #e69875;">default auto-group</span>
</span><span class="line" data-line="546">
</span><span class="line" data-line="547"><span style="color: #859289;">&quot; It is also possible to assign a group directly. This is useful if the</span>
</span><span class="line" data-line="548"><span style="color: #859289;">&quot; definition of the group is in one script and the definition of the</span>
</span><span class="line" data-line="549"><span style="color: #859289;">&quot; auto-command is in another script.</span>
</span><span class="line" data-line="550">
</span><span class="line" data-line="551"><span style="color: #859289;">&quot; In one file</span>
</span><span class="line" data-line="552"><span style="color: #e67e80;">augroup</span> <span style="color: #dbbc7f;">auto</span>-source
</span><span class="line" data-line="553">    <span style="color: #e67e80;">autocmd</span><span style="color: #7fbbb3;">!</span>
</span><span class="line" data-line="554"><span style="color: #e67e80;">augroup</span> <span style="color: #dbbc7f;">END</span>
</span><span class="line" data-line="555">
</span><span class="line" data-line="556"><span style="color: #859289;">&quot; In another file</span>
</span><span class="line" data-line="557"><span style="color: #e67e80;">autocmd</span> <span style="color: #dbbc7f;">auto-source</span> <span style="color: #a7c080;">BufWritePost</span> $MYVIMRC source $MYVIMRC
</span><span class="line" data-line="558">
</span><span class="line" data-line="559"><span style="color: #859289;">&quot; Executing (run-time macros of sorts)</span>
</span><span class="line" data-line="560"><span style="color: #859289;">&quot; ####################################</span>
</span><span class="line" data-line="561">
</span><span class="line" data-line="562"><span style="color: #859289;">&quot; Sometimes we need to construct an ex-command where part of the command is not</span>
</span><span class="line" data-line="563"><span style="color: #859289;">&quot; known until runtime.</span>
</span><span class="line" data-line="564">
</span><span class="line" data-line="565"><span style="color: #e67e80;">let</span> <span style="color: #d3c6aa;">line</span> <span style="color: #e69875;">=</span> <span style="color: #d699b6;">3</span>                | <span style="color: #859289;">&quot; Line number determined at runtime</span>
</span><span class="line" data-line="566"><span style="color: #e67e80;">execute</span> <span style="color: #d3c6aa;">line</span> <span style="color: #e69875;">..</span> <span style="color: #83c092;">&#39;delete&#39;</span>    | <span style="color: #859289;">&quot; Delete a line</span>
</span><span class="line" data-line="567">
</span><span class="line" data-line="568"><span style="color: #859289;">&quot; Executing normal-mode commands</span>
</span><span class="line" data-line="569"><span style="color: #859289;">&quot; ##############################</span>
</span><span class="line" data-line="570"><span style="color: #859289;">&quot;</span>
</span><span class="line" data-line="571"><span style="color: #859289;">&quot; Use `:normal` to play back a sequence of normal mode commands from the</span>
</span><span class="line" data-line="572"><span style="color: #859289;">&quot; command-line. Add an exclamation mark to ignore user mappings.</span>
</span><span class="line" data-line="573">
</span><span class="line" data-line="574"><span style="color: #e67e80;">normal</span><span style="color: #7fbbb3;">!</span><span style="color: #83c092;"> ggddGp             | &quot; Transplant first line to end of buffer</span>
</span><span class="line" data-line="575">
</span><span class="line" data-line="576"><span style="color: #859289;">&quot; Window commands can be used with :normal, or with :wincmd if :normal would</span>
</span><span class="line" data-line="577"><span style="color: #859289;">&quot; not work</span>
</span><span class="line" data-line="578"><span style="color: #e67e80;">wincmd</span> L                   | <span style="color: #859289;">&quot; Move current window all the way to the right</span>
</span><span class="line" data-line="579">
</span><span class="line" data-line="580">
</span><span class="line" data-line="581"><span style="color: #859289;">&quot; ###########################</span>
</span><span class="line" data-line="582"><span style="color: #859289;">&quot;  Frequently used functions</span>
</span><span class="line" data-line="583"><span style="color: #859289;">&quot; ###########################</span>
</span><span class="line" data-line="584">
</span><span class="line" data-line="585"><span style="color: #859289;">&quot; Feature check</span>
</span><span class="line" data-line="586"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">has</span><span style="color: #d3c6aa;">(</span><span style="color: #83c092;">&#39;nvim&#39;</span><span style="color: #d3c6aa;">)</span>                  | &quot; <span style="color: #e69875;">Running Neovim</span>
</span><span class="line" data-line="587"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">has</span><span style="color: #d3c6aa;">(</span><span style="color: #83c092;">&#39;python3&#39;</span><span style="color: #d3c6aa;">)</span>               | &quot; <span style="color: #e69875;">Support for Python 3 plugins</span>
</span><span class="line" data-line="588"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">has</span><span style="color: #d3c6aa;">(</span><span style="color: #83c092;">&#39;unix&#39;</span><span style="color: #d3c6aa;">)</span>                  | &quot; <span style="color: #e69875;">Running on a Unix system</span>
</span><span class="line" data-line="589"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">has</span><span style="color: #d3c6aa;">(</span><span style="color: #83c092;">&#39;win32&#39;</span><span style="color: #d3c6aa;">)</span>                 | &quot; <span style="color: #e69875;">Running on a Windows system</span>
</span><span class="line" data-line="590">
</span><span class="line" data-line="591">
</span><span class="line" data-line="592"><span style="color: #859289;">&quot; Test if something exists</span>
</span><span class="line" data-line="593"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">exists</span><span style="color: #d3c6aa;">(</span><span style="color: #83c092;">&#39;&amp;mouse&#39;</span><span style="color: #d3c6aa;">)</span>             | &quot; <span style="color: #e69875;">Option (exists only)</span>
</span><span class="line" data-line="594"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">exists</span><span style="color: #d3c6aa;">(</span><span style="color: #83c092;">&#39;+mouse&#39;</span><span style="color: #d3c6aa;">)</span>             | &quot; <span style="color: #e69875;">Option (exists and works)</span>
</span><span class="line" data-line="595"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">exists</span><span style="color: #d3c6aa;">(</span><span style="color: #83c092;">&#39;$HOSTNAME&#39;</span><span style="color: #d3c6aa;">)</span>          | &quot; <span style="color: #e69875;">Environment variable</span>
</span><span class="line" data-line="596"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">exists</span><span style="color: #d3c6aa;">(</span><span style="color: #83c092;">&#39;*strftime&#39;</span><span style="color: #d3c6aa;">)</span>          | &quot; <span style="color: #e69875;">Built-in function</span>
</span><span class="line" data-line="597"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">exists</span><span style="color: #d3c6aa;">(</span><span style="color: #83c092;">&#39;**s:MyFunc&#39;</span><span style="color: #d3c6aa;">)</span>         | &quot; <span style="color: #e69875;">User-defined function</span>
</span><span class="line" data-line="598"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">exists</span><span style="color: #d3c6aa;">(</span><span style="color: #83c092;">&#39;bufcount&#39;</span><span style="color: #d3c6aa;">)</span>           | &quot; <span style="color: #e69875;">Variable (scope optional)</span>
</span><span class="line" data-line="599"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">exists</span><span style="color: #d3c6aa;">(</span><span style="color: #83c092;">&#39;my_dict[&quot;foo&quot;]&#39;</span><span style="color: #d3c6aa;">)</span>     | &quot; <span style="color: #e69875;">Variable (dictionary entry)</span>
</span><span class="line" data-line="600"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">exists</span><span style="color: #d3c6aa;">(</span><span style="color: #83c092;">&#39;my_dict[&quot;foo&quot;]&#39;</span><span style="color: #d3c6aa;">)</span>     | &quot; <span style="color: #e69875;">Variable (dictionary entry)</span>
</span><span class="line" data-line="601"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">exists</span><span style="color: #d3c6aa;">(</span><span style="color: #83c092;">&#39;:Make&#39;</span><span style="color: #d3c6aa;">)</span>              | &quot; <span style="color: #e69875;">Command</span>
</span><span class="line" data-line="602"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">exists</span><span style="color: #d3c6aa;">(</span><span style="color: #83c092;">&quot;#CursorHold&quot;</span><span style="color: #d3c6aa;">)</span>        | &quot; <span style="color: #e69875;">Auto-command defined for event</span>
</span><span class="line" data-line="603"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">exists</span><span style="color: #d3c6aa;">(</span><span style="color: #83c092;">&quot;#BufReadPre#*.gz&quot;</span><span style="color: #d3c6aa;">)</span>   | &quot; <span style="color: #e69875;">Event and pattern</span>
</span><span class="line" data-line="604"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">exists</span><span style="color: #d3c6aa;">(</span><span style="color: #83c092;">&quot;#filetypeindent&quot;</span><span style="color: #d3c6aa;">)</span>    | &quot; <span style="color: #e69875;">Auto-command group</span>
</span><span class="line" data-line="605"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">exists</span><span style="color: #d3c6aa;">(</span><span style="color: #83c092;">&quot;##ColorScheme&quot;</span><span style="color: #d3c6aa;">)</span>      | &quot; Auto-<span style="color: #e69875;">command supported for event</span>
</span><span class="line" data-line="606">
</span><span class="line" data-line="607"><span style="color: #859289;">&quot; Various dynamic values (see |expand()|)</span>
</span><span class="line" data-line="608"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">expand</span><span style="color: #d3c6aa;">(</span><span style="color: #83c092;">&#39;%&#39;</span><span style="color: #d3c6aa;">)</span>                  | &quot; <span style="color: #e69875;">Current file name</span>
</span><span class="line" data-line="609"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">expand</span><span style="color: #d3c6aa;">(</span><span style="color: #83c092;">&#39;&lt;cword&gt;&#39;</span><span style="color: #d3c6aa;">)</span>            | &quot; <span style="color: #e69875;">Current word under cursor</span>
</span><span class="line" data-line="610"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">expand</span><span style="color: #d3c6aa;">(</span><span style="color: #83c092;">&#39;%:p&#39;</span><span style="color: #d3c6aa;">)</span>                | &quot; <span style="color: #e69875;">Modifier are possible</span>
</span><span class="line" data-line="611">
</span><span class="line" data-line="612"><span style="color: #859289;">&quot; Type tests</span>
</span><span class="line" data-line="613"><span style="color: #859289;">&quot; There are unique constants defined for the following types. Older versions</span>
</span><span class="line" data-line="614"><span style="color: #859289;">&quot; of Vim lack the type variables, see the reference &quot; documentation for a</span>
</span><span class="line" data-line="615"><span style="color: #859289;">&quot; workaround</span>
</span><span class="line" data-line="616"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">type</span><span style="color: #d3c6aa;">(</span><span style="color: #d3c6aa;">my_var</span><span style="color: #d3c6aa;">)</span> <span style="color: #e69875;">==</span> <span style="color: #dbbc7f;">v:</span><span style="color: #d3c6aa;">t_number</span>      | &quot; <span style="color: #e69875;">Number</span>
</span><span class="line" data-line="617"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">type</span><span style="color: #d3c6aa;">(</span><span style="color: #d3c6aa;">my_var</span><span style="color: #d3c6aa;">)</span> <span style="color: #e69875;">==</span> <span style="color: #dbbc7f;">v:</span><span style="color: #d3c6aa;">t_string</span>      | &quot; <span style="color: #e69875;">String</span>
</span><span class="line" data-line="618"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">type</span><span style="color: #d3c6aa;">(</span><span style="color: #d3c6aa;">my_var</span><span style="color: #d3c6aa;">)</span> <span style="color: #e69875;">==</span> <span style="color: #dbbc7f;">v:</span><span style="color: #d3c6aa;">t_func</span>        | &quot; <span style="color: #e69875;">Funcref</span>
</span><span class="line" data-line="619"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">type</span><span style="color: #d3c6aa;">(</span><span style="color: #d3c6aa;">my_var</span><span style="color: #d3c6aa;">)</span> <span style="color: #e69875;">==</span> <span style="color: #dbbc7f;">v:</span><span style="color: #d3c6aa;">t_list</span>        | &quot; <span style="color: #e69875;">List</span>
</span><span class="line" data-line="620"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">type</span><span style="color: #d3c6aa;">(</span><span style="color: #d3c6aa;">my_var</span><span style="color: #d3c6aa;">)</span> <span style="color: #e69875;">==</span> <span style="color: #dbbc7f;">v:</span><span style="color: #d3c6aa;">t_dict</span>        | &quot; <span style="color: #e69875;">Dictionary</span>
</span><span class="line" data-line="621"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">type</span><span style="color: #d3c6aa;">(</span><span style="color: #d3c6aa;">my_var</span><span style="color: #d3c6aa;">)</span> <span style="color: #e69875;">==</span> <span style="color: #dbbc7f;">v:</span><span style="color: #d3c6aa;">t_float</span>       | &quot; <span style="color: #e69875;">Float</span>
</span><span class="line" data-line="622"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">type</span><span style="color: #d3c6aa;">(</span><span style="color: #d3c6aa;">my_var</span><span style="color: #d3c6aa;">)</span> <span style="color: #e69875;">==</span> <span style="color: #dbbc7f;">v:</span><span style="color: #d3c6aa;">t_bool</span>        | &quot; <span style="color: #e69875;">Explicit Boolean</span>
</span><span class="line" data-line="623"><span style="color: #859289;">&quot; For the null object should compare it against itself</span>
</span><span class="line" data-line="624"><span style="color: #e67e80;">echo</span>  <span style="color: #d3c6aa;">my_var</span> <span style="color: #e69875;">is</span> <span style="color: #dbbc7f;">v:</span><span style="color: #d3c6aa;">null</span>
</span><span class="line" data-line="625">
</span><span class="line" data-line="626"><span style="color: #859289;">&quot; Format strings</span>
</span><span class="line" data-line="627"><span style="color: #e67e80;">echo</span>  <span style="color: #a7c080;">printf</span><span style="color: #d3c6aa;">(</span><span style="color: #83c092;">&#39;%d in hexadecimal is %X&#39;</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">123</span><span style="color: #859289;">,</span> <span style="color: #d699b6;">123</span><span style="color: #d3c6aa;">)</span>
</span><span class="line" data-line="628">
</span><span class="line" data-line="629">
</span><span class="line" data-line="630"><span style="color: #859289;">&quot; #####################</span>
</span><span class="line" data-line="631"><span style="color: #859289;">&quot;  Tricks of the trade</span>
</span><span class="line" data-line="632"><span style="color: #859289;">&quot; #####################</span>
</span><span class="line" data-line="633">
</span><span class="line" data-line="634"><span style="color: #859289;">&quot; Source guard</span>
</span><span class="line" data-line="635"><span style="color: #859289;">&quot; ############</span>
</span><span class="line" data-line="636">
</span><span class="line" data-line="637"><span style="color: #859289;">&quot; Prevent a file from being sourced multiple times; users can set the variable</span>
</span><span class="line" data-line="638"><span style="color: #859289;">&quot; in their configuration to prevent the plugin from loading at all.</span>
</span><span class="line" data-line="639"><span style="color: #e67e80;">if</span> <span style="color: #a7c080;">exists</span><span style="color: #d3c6aa;">(</span><span style="color: #83c092;">&#39;g:loaded_my_plugin&#39;</span><span style="color: #d3c6aa;">)</span>
</span><span class="line" data-line="640">    <span style="color: #e67e80;">finish</span>
</span><span class="line" data-line="641"><span style="color: #e67e80;">endif</span>
</span><span class="line" data-line="642"><span style="color: #e67e80;">let</span> <span style="color: #dbbc7f;">g:</span><span style="color: #d3c6aa;">loaded_my_plugin</span> <span style="color: #e69875;">=</span> v:<span style="color: #d699b6;">true</span>
</span><span class="line" data-line="643">
</span><span class="line" data-line="644"><span style="color: #859289;">&quot; Default values</span>
</span><span class="line" data-line="645"><span style="color: #859289;">&quot; ##############</span>
</span><span class="line" data-line="646">
</span><span class="line" data-line="647"><span style="color: #859289;">&quot; Get a default value: if the user defines a variable use it, otherwise use a</span>
</span><span class="line" data-line="648"><span style="color: #859289;">&quot; hard-coded default. Uses the fact that a scope is also a dictionary.</span>
</span><span class="line" data-line="649"><span style="color: #e67e80;">let</span> <span style="color: #dbbc7f;">s:</span><span style="color: #d3c6aa;">greeting</span> <span style="color: #e69875;">=</span> <span style="color: #a7c080;">get</span><span style="color: #d3c6aa;">(</span>g:<span style="color: #859289;">,</span> <span style="color: #83c092;">&#39;my_plugin_greeting&#39;</span><span style="color: #859289;">,</span> <span style="color: #83c092;">&#39;Hello&#39;</span><span style="color: #d3c6aa;">)</span>
</span></code></pre>